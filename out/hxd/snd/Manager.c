// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <hxd/snd/Manager.h>
haxe__io__Bytes haxe_io_Bytes_alloc(int);
extern hxd__snd__$Manager g$_hxd_snd_Manager;
extern hl_type t$hxd_snd_Manager;
void hxd_snd_Manager_new(hxd__snd__Manager);
void hxd_snd_Manager_update(hxd__snd__Manager);
extern hl_type t$fun_85aa75d;
haxe__MainEvent haxe_MainLoop_add(vclosure*,int*);
void hxd_snd_Channel_stop(hxd__snd__Channel);
int String___compare(String,vdynamic*);
#include <hxd/res/Sound.h>
#include <hxd/impl/ArrayIterator_hxd_snd_Channel.h>
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$hxd_impl_ArrayIterator_hxd_snd_Channel;
void hxd_impl_ArrayIterator_hxd_snd_Channel_new(hxd__impl__ArrayIterator_hxd_snd_Channel,hl__types__ArrayObj);
extern hl_type t$vrt_f2d7902;
#include <hxd/snd/Buffer.h>
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
bool haxe_ds_StringMap_remove(haxe__ds__StringMap,String);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
void hxd_snd_Buffer_dispose(hxd__snd__Buffer);
#include <hxd/snd/Source.h>
void hxd_snd_Source_dispose(hxd__snd__Source);
vvirtual* haxe_ds_StringMap_iterator(haxe__ds__StringMap);
extern hl_type t$vrt_b9434ce;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_6f2babc;
extern hl_type t$fun_4c7a70a;
void haxe_MainEvent_stop(haxe__MainEvent);
hxd__snd__Data hxd_res_Sound_getData(hxd__res__Sound);
String Std_string(vdynamic*);
extern String s$_has_no_samples;
String String___add__(String,String);
vdynamic* haxe_Exception_thrown(vdynamic*);
extern hl_type t$hxd_snd_Channel;
void hxd_snd_Channel_new(hxd__snd__Channel);
double hxd_snd_Data_get_duration(hxd__snd__Data);
bool hxd_snd_Data_isLoading(hxd__snd__Data);
double hxd_snd_Channel_set_position(hxd__snd__Channel,double);
vdynamic* hl_types_ArrayObj_shift(hl__types__ArrayObj);
void hxd_snd_Manager_releaseChannel(hxd__snd__Manager,hxd__snd__Channel);
#include <hl/natives.h>
void hxd_snd_Manager_releaseSource(hxd__snd__Manager,hxd__snd__Source);
extern hl_type t$fun_9c1c7f8;
hxd__snd__Buffer hxd_snd_Manager_unqueueBuffer(hxd__snd__Manager,hxd__snd__Source);
bool hxd_snd_Manager_queueBuffer(hxd__snd__Manager,hxd__snd__Source,hxd__res__Sound,int);
void hxd_snd_Channel_calcAudibleVolume(hxd__snd__Channel,double);
int hxd_snd_Manager_sortChannel(hxd__snd__Manager,hxd__snd__Channel,hxd__snd__Channel);
extern hl_type t$fun_df54ec1;
extern String s$could_not_get_a_source;
bool hxd_snd_Manager_checkTargetFormat(hxd__snd__Manager,hxd__snd__Data,bool*);
extern hl_type t$fun_1e57f8c;
extern String s$Could_not_set_volume_;
String String___alloc__(vbyte*,int);
extern String s$_on_;
void Sys_println(vdynamic*);
extern hl_type t$fun_ba44378;
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
void hxd_snd_Manager_unbindEffect(hxd__snd__Manager,hxd__snd__Channel,hxd__snd__Source,hxd__snd__Effect);
void hxd_snd_Manager_bindEffect(hxd__snd__Manager,hxd__snd__Channel,hxd__snd__Source,hxd__snd__Effect);
hxd__snd__Effect hxd_snd_Manager_regEffect(hxd__snd__Effect,hxd__snd__Effect);
int hxd_snd_Manager_sortEffect(hxd__snd__Manager,hxd__snd__Effect,hxd__snd__Effect);
extern hl_type t$fun_cbf2617;
extern hl_type t$fun_2f12e14;
extern hl_type t$fun_32c178e;
int hxd_snd_Data_getBytesPerSample(hxd__snd__Data);
void hxd_snd_Data_decode(hxd__snd__Data,haxe__io__Bytes,int,int,int);
hxd__snd__Buffer hxd_snd_Manager_getSoundBuffer(hxd__snd__Manager,hxd__res__Sound,hxd__snd__SoundGroup);
extern hl_type t$fun_b8a20fe;
hxd__snd__Buffer hxd_snd_Manager_getStreamBuffer(hxd__snd__Manager,hxd__snd__Source,hxd__res__Sound,hxd__snd__SoundGroup,int);
extern hl_type t$fun_5200ae0;
void hl_types_ArrayObj_unshift(hl__types__ArrayObj,vdynamic*);
hl__types__ArrayObj hl_types_ArrayObj_copy(hl__types__ArrayObj);
extern hl_type t$hxd_snd_Effect;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern venum* g$hxd_snd_SampleFormat_UI8;
extern venum* g$hxd_snd_SampleFormat_I16;
void hxd_snd_Manager_fillSoundBuffer(hxd__snd__Manager,hxd__snd__Buffer,hxd__snd__Data,bool*);
#include <hxd/fs/FileEntry.h>
extern String s$mono;
extern hl_type t$hxd_snd_Buffer;
void hxd_snd_Buffer_new(hxd__snd__Buffer,vvirtual*);
void hl_types_ArrayObj___expand(hl__types__ArrayObj,int);
extern hl_type t$ctx_a402b52;
extern hl_type t$fun_a762f40;
void hxd_snd_Data_load(hxd__snd__Data,vclosure*);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
extern hl_type t$fun_c02af75;
void hxd_snd_Data_resampleBuffer(hxd__snd__Data,haxe__io__Bytes,int,haxe__io__Bytes,int,int,venum*,int,int);
#include <hxd/snd/ChannelBase.h>
void hxd_snd_ChannelBase_removeEffect(hxd__snd__ChannelBase,hxd__snd__Effect);
#include <hxd/snd/openal/Driver.h>
#include <haxe/Exception.h>
#include <_std/String.h>
extern hl_type t$hxd_snd_openal_Driver;
void hxd_snd_openal_Driver_new(hxd__snd__openal__Driver);
extern hl_type t$vrt_51912fa;
haxe__Exception haxe_Exception_caught(vdynamic*);
extern $String g$_String;
bool Std_isOfType(vdynamic*,vdynamic*);
extern venum* g$4891d77;
extern hl_type t$fun_917e45c;
extern hl_type t$hxd_snd_SoundGroup;
extern String s$master;
void hxd_snd_SoundGroup_new(hxd__snd__SoundGroup,String);
extern hl_type t$hxd_snd_ChannelGroup;
void hxd_snd_ChannelGroup_new(hxd__snd__ChannelGroup,String);
extern hl_type t$hxd_snd_Listener;
void hxd_snd_Listener_new(hxd__snd__Listener);
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern hl_type t$String;
extern hl_type t$hxd_snd_Source;
void hxd_snd_Source_new(hxd__snd__Source,vvirtual*);

haxe__io__Bytes hxd_snd_Manager_getTmpBytes(hxd__snd__Manager r0,int r1) {
	haxe__io__Bytes r3;
	int r2;
	r3 = r0->cachedBytes;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( r2 >= r1 ) goto label$658e279_1_6;
	r3 = haxe_io_Bytes_alloc(r1);
	r0->cachedBytes = r3;
	label$658e279_1_6:
	r3 = r0->cachedBytes;
	return r3;
}

haxe__io__Bytes hxd_snd_Manager_getResampleBytes(hxd__snd__Manager r0,int r1) {
	haxe__io__Bytes r3;
	int r2;
	r3 = r0->resampleBytes;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	if( r2 >= r1 ) goto label$658e279_2_6;
	r3 = haxe_io_Bytes_alloc(r1);
	r0->resampleBytes = r3;
	label$658e279_2_6:
	r3 = r0->resampleBytes;
	return r3;
}

hxd__snd__Manager hxd_snd_Manager_get() {
	bool r7;
	hxd__snd__Manager r1, r5;
	haxe__MainEvent r3;
	hxd__snd__$Manager r2;
	vclosure *r4;
	int *r6;
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r1 = r2->instance;
	if( r1 ) goto label$658e279_3_24;
	r1 = (hxd__snd__Manager)hl_alloc_obj(&t$hxd_snd_Manager);
	hxd_snd_Manager_new(r1);
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r2->instance = r1;
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r1 = r2->instance;
	if( r1 == NULL ) hl_null_access();
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r5 = r2->instance;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_alloc_closure_ptr(&t$fun_85aa75d,hxd_snd_Manager_update,r5);
	r6 = NULL;
	r3 = haxe_MainLoop_add(r4,r6);
	r1->updateEvent = r3;
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r1 = r2->instance;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->updateEvent;
	if( r3 == NULL ) hl_null_access();
	r7 = false;
	r3->isBlocking = r7;
	label$658e279_3_24:
	r2 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r1 = r2->instance;
	return r1;
}

void hxd_snd_Manager_stopAll(hxd__snd__Manager r0) {
	hxd__snd__Channel r1;
	label$658e279_4_0:
	r1 = r0->channels;
	if( !r1 ) goto label$658e279_4_7;
	r1 = r0->channels;
	if( r1 == NULL ) hl_null_access();
	hxd_snd_Channel_stop(r1);
	goto label$658e279_4_0;
	label$658e279_4_7:
	return;
}

void hxd_snd_Manager_stopAllNotLooping(hxd__snd__Manager r0) {
	bool r4;
	hxd__snd__Channel r1, r3;
	r1 = r0->channels;
	label$658e279_5_1:
	if( !r1 ) goto label$658e279_5_10;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->next;
	r4 = r1->loop;
	if( r4 ) goto label$658e279_5_8;
	hxd_snd_Channel_stop(r1);
	label$658e279_5_8:
	r1 = r3;
	goto label$658e279_5_1;
	label$658e279_5_10:
	return;
}

void hxd_snd_Manager_stopByName(hxd__snd__Manager r0,String r1) {
	String r6;
	hxd__snd__Channel r2, r4;
	hxd__snd__SoundGroup r5;
	r2 = r0->channels;
	label$658e279_6_1:
	if( !r2 ) goto label$658e279_6_14;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->next;
	r5 = r2->soundGroup;
	if( !r5 ) goto label$658e279_6_12;
	r5 = r2->soundGroup;
	if( r5 == NULL ) hl_null_access();
	r6 = r5->name;
	if( r6 != r1 && (!r6 || !r1 || String___compare(r6,(vdynamic*)r1) != 0) ) goto label$658e279_6_12;
	hxd_snd_Channel_stop(r2);
	label$658e279_6_12:
	r2 = r4;
	goto label$658e279_6_1;
	label$658e279_6_14:
	return;
}

vvirtual* hxd_snd_Manager_getAll(hxd__snd__Manager r0,hxd__res__Sound r1) {
	vvirtual *r9;
	hl__types__ArrayObj r4;
	hxd__res__Sound r6;
	hxd__snd__Channel r2, r5;
	hxd__impl__ArrayIterator_hxd_snd_Channel r8;
	int r7;
	r2 = r0->channels;
	r4 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r4);
	label$658e279_7_3:
	if( !r2 ) goto label$658e279_7_13;
	if( r2 == NULL ) hl_null_access();
	r6 = r2->sound;
	if( r6 != r1 ) goto label$658e279_7_10;
	if( r4 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_push(r4,((vdynamic*)r2));
	label$658e279_7_10:
	r5 = r2->next;
	r2 = r5;
	goto label$658e279_7_3;
	label$658e279_7_13:
	r8 = (hxd__impl__ArrayIterator_hxd_snd_Channel)hl_alloc_obj(&t$hxd_impl_ArrayIterator_hxd_snd_Channel);
	hxd_impl_ArrayIterator_hxd_snd_Channel_new(r8,r4);
	r9 = hl_to_virtual(&t$vrt_f2d7902,(vdynamic*)r8);
	return r9;
}

void hxd_snd_Manager_cleanCache(hxd__snd__Manager r0) {
	hxd__snd__Buffer r10;
	String r6;
	haxe__ds__StringMap r9;
	hl__types__ArrayObj r5;
	bool r11;
	vdynamic *r7;
	varray *r8;
	int r1, r3, r4;
	r1 = 0;
	label$658e279_8_1:
	r5 = r0->soundBufferKeys;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	if( r1 >= r4 ) goto label$658e279_8_37;
	r5 = r0->soundBufferKeys;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->length;
	if( ((unsigned)r1) < ((unsigned)r4) ) goto label$658e279_8_12;
	r6 = NULL;
	goto label$658e279_8_15;
	label$658e279_8_12:
	r8 = r5->array;
	r7 = ((vdynamic**)(r8 + 1))[r1];
	r6 = (String)r7;
	label$658e279_8_15:
	r9 = r0->soundBufferMap;
	if( r9 == NULL ) hl_null_access();
	r7 = haxe_ds_StringMap_get(r9,r6);
	r10 = (hxd__snd__Buffer)r7;
	++r1;
	if( r10 == NULL ) hl_null_access();
	r3 = r10->refs;
	r4 = 0;
	if( r4 >= r3 ) goto label$658e279_8_25;
	goto label$658e279_8_1;
	label$658e279_8_25:
	r9 = r0->soundBufferMap;
	if( r9 == NULL ) hl_null_access();
	r11 = haxe_ds_StringMap_remove(r9,r6);
	r5 = r0->soundBufferKeys;
	if( r5 == NULL ) hl_null_access();
	r11 = hl_types_ArrayObj_remove(r5,((vdynamic*)r6));
	--r1;
	hxd_snd_Buffer_dispose(r10);
	r3 = r0->soundBufferCount;
	--r3;
	r0->soundBufferCount = r3;
	goto label$658e279_8_1;
	label$658e279_8_37:
	return;
}

void hxd_snd_Manager_dispose(hxd__snd__Manager r0) {
	hxd__snd__Buffer r13;
	haxe__ds__StringMap r10;
	hl__types__ArrayObj r4;
	vvirtual *r2, *r9, *r11;
	hxd__snd__Manager r17;
	hxd__snd__EffectDriver r15;
	bool r12;
	hxd__snd__Effect r14;
	haxe__MainEvent r16;
	hxd__snd__Source r6;
	hxd__snd__$Manager r18;
	vdynamic *r7;
	varray *r8;
	int r3, r5;
	hxd_snd_Manager_stopAll(r0);
	r2 = r0->driver;
	if( !r2 ) goto label$658e279_9_71;
	r3 = 0;
	r4 = r0->sources;
	label$658e279_9_5:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$658e279_9_20;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$658e279_9_13;
	r6 = NULL;
	goto label$658e279_9_16;
	label$658e279_9_13:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r6 = (hxd__snd__Source)r7;
	label$658e279_9_16:
	++r3;
	if( r6 == NULL ) hl_null_access();
	hxd_snd_Source_dispose(r6);
	goto label$658e279_9_5;
	label$658e279_9_20:
	r10 = r0->soundBufferMap;
	if( r10 == NULL ) hl_null_access();
	r9 = haxe_ds_StringMap_iterator(r10);
	r11 = hl_to_virtual(&t$vrt_b9434ce,(vdynamic*)r9);
	label$658e279_9_24:
	if( r11 == NULL ) hl_null_access();
	if( hl_vfields(r11)[0] ) r12 = ((bool (*)(vdynamic*))hl_vfields(r11)[0])(r11->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r11->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r12 = (bool)ret.v.i;
	}
	if( !r12 ) goto label$658e279_9_32;
	if( hl_vfields(r11)[1] ) r13 = ((hxd__snd__Buffer (*)(vdynamic*))hl_vfields(r11)[1])(r11->value); else {
		r13 = (hxd__snd__Buffer)hl_dyn_call_obj(r11->value,&t$fun_6f2babc,151160317/*next*/,NULL,NULL);
	}
	if( r13 == NULL ) hl_null_access();
	hxd_snd_Buffer_dispose(r13);
	goto label$658e279_9_24;
	label$658e279_9_32:
	r3 = 0;
	r4 = r0->freeStreamBuffers;
	label$658e279_9_34:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$658e279_9_49;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$658e279_9_42;
	r13 = NULL;
	goto label$658e279_9_45;
	label$658e279_9_42:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r13 = (hxd__snd__Buffer)r7;
	label$658e279_9_45:
	++r3;
	if( r13 == NULL ) hl_null_access();
	hxd_snd_Buffer_dispose(r13);
	goto label$658e279_9_34;
	label$658e279_9_49:
	r3 = 0;
	r4 = r0->effectGC;
	label$658e279_9_51:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$658e279_9_68;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$658e279_9_59;
	r14 = NULL;
	goto label$658e279_9_62;
	label$658e279_9_59:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r14 = (hxd__snd__Effect)r7;
	label$658e279_9_62:
	++r3;
	if( r14 == NULL ) hl_null_access();
	r15 = r14->driver;
	if( r15 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r15->$type->vobj_proto[1])(r15);
	goto label$658e279_9_51;
	label$658e279_9_68:
	r2 = r0->driver;
	if( r2 == NULL ) hl_null_access();
	if( hl_vfields(r2)[13] ) ((void (*)(vdynamic*))hl_vfields(r2)[13])(r2->value); else {
		hl_dyn_call_obj(r2->value,&t$fun_4c7a70a,-78872683/*dispose*/,NULL,NULL);
	}
	label$658e279_9_71:
	r4 = NULL;
	r0->sources = r4;
	r10 = NULL;
	r0->soundBufferMap = r10;
	r4 = NULL;
	r0->soundBufferKeys = r4;
	r4 = NULL;
	r0->freeStreamBuffers = r4;
	r4 = NULL;
	r0->effectGC = r4;
	r16 = r0->updateEvent;
	if( r16 == NULL ) hl_null_access();
	haxe_MainEvent_stop(r16);
	r17 = NULL;
	r18 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r18->instance = r17;
	return;
}

hxd__snd__Channel hxd_snd_Manager_play(hxd__snd__Manager r0,hxd__res__Sound r1,hxd__snd__ChannelGroup r2,hxd__snd__SoundGroup r3) {
	String r11, r12;
	vvirtual *r17, *r18;
	bool r16;
	hxd__snd__Channel r13, r15;
	hxd__snd__Data r7;
	double r14;
	hxd__snd__SoundGroup r5;
	vdynamic *r10;
	int r8, r9;
	hxd__snd__ChannelGroup r6;
	if( r3 ) goto label$658e279_10_3;
	r5 = r0->masterSoundGroup;
	r3 = r5;
	label$658e279_10_3:
	if( r2 ) goto label$658e279_10_6;
	r6 = r0->masterChannelGroup;
	r2 = r6;
	label$658e279_10_6:
	if( r1 == NULL ) hl_null_access();
	r7 = hxd_res_Sound_getData(r1);
	if( r7 == NULL ) hl_null_access();
	r8 = r7->samples;
	r9 = 0;
	if( r8 != r9 ) goto label$658e279_10_17;
	r11 = Std_string(((vdynamic*)r1));
	r12 = (String)s$_has_no_samples;
	r11 = String___add__(r11,r12);
	r10 = haxe_Exception_thrown(((vdynamic*)r11));
	hl_throw((vdynamic*)r10);
	label$658e279_10_17:
	r13 = (hxd__snd__Channel)hl_alloc_obj(&t$hxd_snd_Channel);
	hxd_snd_Channel_new(r13);
	r13->sound = r1;
	r14 = hxd_snd_Data_get_duration(r7);
	r13->duration = r14;
	r13->manager = r0;
	r13->soundGroup = r3;
	r13->channelGroup = r2;
	r15 = r0->channels;
	r13->next = r15;
	r16 = hxd_snd_Data_isLoading(r7);
	r13->isLoading = r16;
	r17 = r0->driver;
	r18 = NULL;
	if( r17 == r18 || (r17 && r18 && r17->value && r18->value && r17->value == r18->value) ) goto label$658e279_10_34;
	r16 = false;
	goto label$658e279_10_35;
	label$658e279_10_34:
	r16 = true;
	label$658e279_10_35:
	r13->isVirtual = r16;
	r0->channels = r13;
	return r13;
}

void hxd_snd_Manager_updateVirtualChannels(hxd__snd__Manager r0,double r1) {
	hl__types__ArrayObj r14;
	hxd__snd__Manager r12;
	bool r5;
	hxd__res__Sound r17;
	hxd__snd__Channel r2, r4, r8;
	hxd__snd__Data r18;
	vclosure *r11;
	double r6, r7, r9, r10;
	vdynamic *r16;
	int r13, r15;
	r2 = r0->channels;
	label$658e279_11_1:
	if( !r2 ) goto label$658e279_11_67;
	if( r2 == NULL ) hl_null_access();
	r5 = r2->pause;
	if( r5 ) goto label$658e279_11_10;
	r5 = r2->isVirtual;
	if( !r5 ) goto label$658e279_11_10;
	r5 = r2->isLoading;
	if( !r5 ) goto label$658e279_11_13;
	label$658e279_11_10:
	r4 = r2->next;
	r2 = r4;
	goto label$658e279_11_1;
	label$658e279_11_13:
	r7 = r2->lastStamp;
	r6 = r1 - r7;
	r7 = r2->position;
	r10 = 0.;
	if( !(r6 < r10) ) goto label$658e279_11_20;
	r9 = 0.;
	goto label$658e279_11_21;
	label$658e279_11_20:
	r9 = r6;
	label$658e279_11_21:
	r7 = r7 + r9;
	r7 = hxd_snd_Channel_set_position(r2,r7);
	r2->lastStamp = r1;
	r4 = r2->next;
	label$658e279_11_25:
	if( r2 == NULL ) hl_null_access();
	r7 = r2->position;
	r9 = r2->duration;
	if( !(r7 >= r9) ) goto label$658e279_11_65;
	r7 = r2->position;
	r9 = r2->duration;
	r7 = r7 - r9;
	r7 = hxd_snd_Channel_set_position(r2,r7);
	r11 = r2->onEnd;
	if( r11 == NULL ) hl_null_access();
	r11->hasValue ? ((void (*)(vdynamic*))r11->fun)((vdynamic*)r11->value) : ((void (*)(void))r11->fun)();
	if( !r4 ) goto label$658e279_11_43;
	if( r4 == NULL ) hl_null_access();
	r12 = r4->manager;
	if( r12 ) goto label$658e279_11_43;
	r8 = NULL;
	r4 = r8;
	label$658e279_11_43:
	r14 = r2->queue;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->length;
	r15 = 0;
	if( r15 >= r13 ) goto label$658e279_11_60;
	r14 = r2->queue;
	if( r14 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_shift(r14);
	r17 = (hxd__res__Sound)r16;
	r2->sound = r17;
	r17 = r2->sound;
	if( r17 == NULL ) hl_null_access();
	r18 = hxd_res_Sound_getData(r17);
	if( r18 == NULL ) hl_null_access();
	r7 = hxd_snd_Data_get_duration(r18);
	r2->duration = r7;
	goto label$658e279_11_64;
	label$658e279_11_60:
	r5 = r2->loop;
	if( r5 ) goto label$658e279_11_64;
	hxd_snd_Manager_releaseChannel(r0,r2);
	goto label$658e279_11_65;
	label$658e279_11_64:
	goto label$658e279_11_25;
	label$658e279_11_65:
	r2 = r4;
	goto label$658e279_11_1;
	label$658e279_11_67:
	return;
}

void hxd_snd_Manager_update(hxd__snd__Manager r0) {
	bool *r42;
	String r41, r49;
	hxd__snd__Buffer r18, r19;
	hxd__snd__openal__SourceHandle r22;
	haxe__ds__StringMap r65;
	hl__types__ArrayObj r8, r11, r17;
	vvirtual *r6, *r20;
	hxd__snd__EffectDriver r59;
	bool r21, r43;
	hxd__snd__Listener r61;
	hxd__snd__Effect r44, r50, r51, r53, r55, r56, r57, r58;
	hxd__res__Sound r25, r30;
	hxd__snd__Source r12, r15;
	hxd__snd__Channel r4, r5, r27, r33, r34, r35, r36, r38, r39;
	h3d__Vector r60, r62, r63, r64;
	hxd__snd__$Manager r29;
	hxd__snd__Data r26;
	hxd__snd__SoundGroup r40;
	vclosure *r28, *r32, *r54;
	double r2, r3, r45, r46;
	int *r47;
	vdynamic *r13, *r52;
	vbyte *r48;
	hxd__snd__ChannelGroup r31;
	varray *r14;
	int r7, r9, r10, r16, r23, r24, r37;
	r2 = r0->timeOffset;
	r3 = 0.;
	if( r2 == r3 ) goto label$658e279_12_60;
	r4 = r0->channels;
	label$658e279_12_4:
	if( !r4 ) goto label$658e279_12_22;
	if( r4 == NULL ) hl_null_access();
	r2 = r4->lastStamp;
	r3 = r0->timeOffset;
	r2 = r2 + r3;
	r4->lastStamp = r2;
	r6 = r4->currentFade;
	if( !r6 ) goto label$658e279_12_19;
	r6 = r4->currentFade;
	if( r6 == NULL ) hl_null_access();
	r2 = hl_vfields(r6)[2] ? (*(double*)(hl_vfields(r6)[2])) : (double)hl_dyn_getd(r6->value,-469011757/*start*/);
	r3 = r0->timeOffset;
	r2 = r2 + r3;
	if( hl_vfields(r6)[2] ) *(double*)(hl_vfields(r6)[2]) = (double)r2; else hl_dyn_setd(r6->value,-469011757/*start*/,r2);
	label$658e279_12_19:
	r5 = r4->next;
	r4 = r5;
	goto label$658e279_12_4;
	label$658e279_12_22:
	r7 = 0;
	r8 = r0->sources;
	label$658e279_12_24:
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( r7 >= r10 ) goto label$658e279_12_58;
	r10 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r10) ) goto label$658e279_12_32;
	r12 = NULL;
	goto label$658e279_12_35;
	label$658e279_12_32:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r12 = (hxd__snd__Source)r13;
	label$658e279_12_35:
	++r7;
	r9 = 0;
	if( r12 == NULL ) hl_null_access();
	r11 = r12->buffers;
	label$658e279_12_39:
	if( r11 == NULL ) hl_null_access();
	r16 = r11->length;
	if( r9 >= r16 ) goto label$658e279_12_57;
	r16 = r11->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_47;
	r18 = NULL;
	goto label$658e279_12_50;
	label$658e279_12_47:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r13;
	label$658e279_12_50:
	++r9;
	if( r18 == NULL ) hl_null_access();
	r2 = r18->lastStop;
	r3 = r0->timeOffset;
	r2 = r2 + r3;
	r18->lastStop = r2;
	goto label$658e279_12_39;
	label$658e279_12_57:
	goto label$658e279_12_24;
	label$658e279_12_58:
	r2 = 0.;
	r0->timeOffset = r2;
	label$658e279_12_60:
	r2 = hl_sys_time();
	r0->now = r2;
	r20 = r0->driver;
	if( r20 ) goto label$658e279_12_67;
	r2 = r0->now;
	hxd_snd_Manager_updateVirtualChannels(r0,r2);
	return;
	label$658e279_12_67:
	r7 = 0;
	r8 = r0->sources;
	label$658e279_12_69:
	if( r8 == NULL ) hl_null_access();
	r10 = r8->length;
	if( r7 >= r10 ) goto label$658e279_12_280;
	r10 = r8->length;
	if( ((unsigned)r7) < ((unsigned)r10) ) goto label$658e279_12_77;
	r12 = NULL;
	goto label$658e279_12_80;
	label$658e279_12_77:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r7];
	r12 = (hxd__snd__Source)r13;
	label$658e279_12_80:
	++r7;
	if( r12 == NULL ) hl_null_access();
	r4 = r12->channel;
	if( r4 ) goto label$658e279_12_85;
	goto label$658e279_12_69;
	label$658e279_12_85:
	if( r4 == NULL ) hl_null_access();
	r21 = r4->positionChanged;
	if( !r21 ) goto label$658e279_12_90;
	hxd_snd_Manager_releaseSource(r0,r12);
	goto label$658e279_12_69;
	label$658e279_12_90:
	r18 = NULL;
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r22 = r12->handle;
	if( hl_vfields(r20)[10] ) r9 = ((int (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r20)[10])(r20->value,r22); else {
		void *args[] = {r22};
		vdynamic ret;
		hl_dyn_call_obj(r20->value,&t$fun_9c1c7f8,-6927178/*getProcessedBuffers*/,args,&ret);
		r9 = (int)ret.v.i;
	}
	r10 = 0;
	r16 = r9;
	label$658e279_12_97:
	if( r10 >= r16 ) goto label$658e279_12_127;
	++r10;
	r19 = hxd_snd_Manager_unqueueBuffer(r0,r12);
	if( r19 ) goto label$658e279_12_103;
	goto label$658e279_12_97;
	label$658e279_12_103:
	r18 = r19;
	if( r19 == NULL ) hl_null_access();
	r21 = r19->isEnd;
	if( !r21 ) goto label$658e279_12_126;
	if( r4 == NULL ) hl_null_access();
	r25 = r19->sound;
	r4->sound = r25;
	r25 = r19->sound;
	if( r25 == NULL ) hl_null_access();
	r26 = hxd_res_Sound_getData(r25);
	if( r26 == NULL ) hl_null_access();
	r2 = hxd_snd_Data_get_duration(r26);
	r4->duration = r2;
	r2 = r4->duration;
	r2 = hxd_snd_Channel_set_position(r4,r2);
	r21 = false;
	r4->positionChanged = r21;
	r28 = r4->onEnd;
	if( r28 == NULL ) hl_null_access();
	r28->hasValue ? ((void (*)(vdynamic*))r28->fun)((vdynamic*)r28->value) : ((void (*)(void))r28->fun)();
	if( r12 == NULL ) hl_null_access();
	r24 = 0;
	r12->start = r24;
	label$658e279_12_126:
	goto label$658e279_12_97;
	label$658e279_12_127:
	if( r12 == NULL ) hl_null_access();
	r11 = r12->buffers;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->length;
	r16 = 0;
	if( r10 != r16 ) goto label$658e279_12_176;
	if( r18 == NULL ) hl_null_access();
	r21 = r18->isEnd;
	if( r21 ) goto label$658e279_12_147;
	if( r4 == NULL ) hl_null_access();
	r10 = r18->start;
	r16 = r18->samples;
	r10 = r10 + r16;
	r2 = (double)r10;
	r10 = r18->sampleRate;
	r3 = (double)r10;
	r2 = r2 / r3;
	r2 = hxd_snd_Channel_set_position(r4,r2);
	hxd_snd_Manager_releaseSource(r0,r12);
	goto label$658e279_12_175;
	label$658e279_12_147:
	if( r4 == NULL ) hl_null_access();
	r11 = r4->queue;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->length;
	r16 = 0;
	if( r16 >= r10 ) goto label$658e279_12_168;
	r11 = r4->queue;
	if( r11 == NULL ) hl_null_access();
	r13 = hl_types_ArrayObj_shift(r11);
	r25 = (hxd__res__Sound)r13;
	r4->sound = r25;
	r25 = r4->sound;
	if( r25 == NULL ) hl_null_access();
	r26 = hxd_res_Sound_getData(r25);
	if( r26 == NULL ) hl_null_access();
	r2 = hxd_snd_Data_get_duration(r26);
	r4->duration = r2;
	r2 = 0.;
	r2 = hxd_snd_Channel_set_position(r4,r2);
	hxd_snd_Manager_releaseSource(r0,r12);
	goto label$658e279_12_175;
	label$658e279_12_168:
	r21 = r4->loop;
	if( !r21 ) goto label$658e279_12_174;
	r2 = 0.;
	r2 = hxd_snd_Channel_set_position(r4,r2);
	hxd_snd_Manager_releaseSource(r0,r12);
	goto label$658e279_12_175;
	label$658e279_12_174:
	hxd_snd_Manager_releaseChannel(r0,r4);
	label$658e279_12_175:
	goto label$658e279_12_69;
	label$658e279_12_176:
	if( r4 == NULL ) hl_null_access();
	r11 = r12->buffers;
	if( r11 == NULL ) hl_null_access();
	r10 = 0;
	r16 = r11->length;
	if( ((unsigned)r10) < ((unsigned)r16) ) goto label$658e279_12_184;
	r19 = NULL;
	goto label$658e279_12_187;
	label$658e279_12_184:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r10];
	r19 = (hxd__snd__Buffer)r13;
	label$658e279_12_187:
	if( r19 == NULL ) hl_null_access();
	r25 = r19->sound;
	r4->sound = r25;
	r25 = r4->sound;
	if( r25 == NULL ) hl_null_access();
	r26 = hxd_res_Sound_getData(r25);
	if( r26 == NULL ) hl_null_access();
	r2 = hxd_snd_Data_get_duration(r26);
	r4->duration = r2;
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r22 = r12->handle;
	if( hl_vfields(r20)[11] ) r10 = ((int (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r20)[11])(r20->value,r22); else {
		void *args[] = {r22};
		vdynamic ret;
		hl_dyn_call_obj(r20->value,&t$fun_9c1c7f8,189320139/*getPlayedSampleCount*/,args,&ret);
		r10 = (int)ret.v.i;
	}
	r23 = 0;
	if( r10 >= r23 ) goto label$658e279_12_204;
	r16 = 0;
	r10 = r16;
	label$658e279_12_204:
	r2 = (double)r10;
	r11 = r12->buffers;
	if( r11 == NULL ) hl_null_access();
	r16 = 0;
	r23 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$658e279_12_212;
	r19 = NULL;
	goto label$658e279_12_215;
	label$658e279_12_212:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r19 = (hxd__snd__Buffer)r13;
	label$658e279_12_215:
	if( r19 == NULL ) hl_null_access();
	r16 = r19->sampleRate;
	r3 = (double)r16;
	r2 = r2 / r3;
	r2 = hxd_snd_Channel_set_position(r4,r2);
	r21 = false;
	r4->positionChanged = r21;
	r11 = r12->buffers;
	if( r11 == NULL ) hl_null_access();
	r16 = r11->length;
	r29 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r23 = r29->BUFFER_QUEUE_LENGTH;
	if( r16 >= r23 ) goto label$658e279_12_279;
	r11 = r12->buffers;
	if( r11 == NULL ) hl_null_access();
	r17 = r12->buffers;
	if( r17 == NULL ) hl_null_access();
	r16 = r17->length;
	r23 = 1;
	r16 = r16 - r23;
	r23 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$658e279_12_239;
	r19 = NULL;
	goto label$658e279_12_242;
	label$658e279_12_239:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r19 = (hxd__snd__Buffer)r13;
	label$658e279_12_242:
	if( r19 == NULL ) hl_null_access();
	r21 = r19->isEnd;
	if( r21 ) goto label$658e279_12_251;
	r25 = r19->sound;
	r16 = r19->start;
	r23 = r19->samples;
	r16 = r16 + r23;
	r21 = hxd_snd_Manager_queueBuffer(r0,r12,r25,r16);
	goto label$658e279_12_279;
	label$658e279_12_251:
	r11 = r4->queue;
	if( r11 == NULL ) hl_null_access();
	r16 = r11->length;
	r23 = 0;
	if( r23 >= r16 ) goto label$658e279_12_274;
	r11 = r4->queue;
	if( r11 == NULL ) hl_null_access();
	r16 = 0;
	r23 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r23) ) goto label$658e279_12_263;
	r25 = NULL;
	goto label$658e279_12_266;
	label$658e279_12_263:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r25 = (hxd__res__Sound)r13;
	label$658e279_12_266:
	r16 = 0;
	r21 = hxd_snd_Manager_queueBuffer(r0,r12,r25,r16);
	if( !r21 ) goto label$658e279_12_273;
	r11 = r4->queue;
	if( r11 == NULL ) hl_null_access();
	r13 = hl_types_ArrayObj_shift(r11);
	r30 = (hxd__res__Sound)r13;
	label$658e279_12_273:
	goto label$658e279_12_279;
	label$658e279_12_274:
	r21 = r4->loop;
	if( !r21 ) goto label$658e279_12_279;
	r25 = r19->sound;
	r16 = 0;
	r21 = hxd_snd_Manager_queueBuffer(r0,r12,r25,r16);
	label$658e279_12_279:
	goto label$658e279_12_69;
	label$658e279_12_280:
	r4 = r0->channels;
	label$658e279_12_281:
	if( !r4 ) goto label$658e279_12_321;
	if( r4 == NULL ) hl_null_access();
	r2 = r0->now;
	hxd_snd_Channel_calcAudibleVolume(r4,r2);
	r21 = r4->isLoading;
	if( !r21 ) goto label$658e279_12_296;
	r25 = r4->sound;
	if( r25 == NULL ) hl_null_access();
	r26 = hxd_res_Sound_getData(r25);
	if( r26 == NULL ) hl_null_access();
	r21 = hxd_snd_Data_isLoading(r26);
	if( r21 ) goto label$658e279_12_296;
	r21 = false;
	r4->isLoading = r21;
	label$658e279_12_296:
	r21 = r0->suspended;
	if( r21 ) goto label$658e279_12_316;
	r21 = r4->pause;
	if( r21 ) goto label$658e279_12_316;
	r21 = r4->mute;
	if( r21 ) goto label$658e279_12_316;
	r31 = r4->channelGroup;
	if( r31 == NULL ) hl_null_access();
	r21 = r31->mute;
	if( r21 ) goto label$658e279_12_316;
	r21 = r4->allowVirtual;
	if( !r21 ) goto label$658e279_12_312;
	r2 = r4->audibleVolume;
	r29 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r3 = r29->VIRTUAL_VOLUME_THRESHOLD;
	if( r2 < r3 ) goto label$658e279_12_316;
	label$658e279_12_312:
	r21 = r4->isLoading;
	if( r21 ) goto label$658e279_12_316;
	r21 = false;
	goto label$658e279_12_317;
	label$658e279_12_316:
	r21 = true;
	label$658e279_12_317:
	r4->isVirtual = r21;
	r5 = r4->next;
	r4 = r5;
	goto label$658e279_12_281;
	label$658e279_12_321:
	r5 = r0->channels;
	r32 = hl_alloc_closure_ptr(&t$fun_df54ec1,hxd_snd_Manager_sortChannel,r0);
	if( r5 ) goto label$658e279_12_327;
	r33 = NULL;
	r27 = r33;
	goto label$658e279_12_411;
	label$658e279_12_327:
	r7 = 1;
	r9 = 0;
	r10 = 0;
	label$658e279_12_330:
	r21 = true;
	if( !r21 ) goto label$658e279_12_410;
	r33 = r5;
	r34 = NULL;
	r5 = r34;
	r35 = NULL;
	r34 = r35;
	r23 = 0;
	r16 = r23;
	label$658e279_12_340:
	if( !r33 ) goto label$658e279_12_400;
	++r16;
	r35 = r33;
	r23 = 0;
	r9 = r23;
	r23 = 0;
	r24 = r7;
	label$658e279_12_348:
	if( r23 >= r24 ) goto label$658e279_12_358;
	++r23;
	++r9;
	if( r35 == NULL ) hl_null_access();
	r36 = r35->next;
	r35 = r36;
	if( r36 ) goto label$658e279_12_357;
	goto label$658e279_12_358;
	label$658e279_12_357:
	goto label$658e279_12_348;
	label$658e279_12_358:
	r10 = r7;
	label$658e279_12_359:
	r24 = 0;
	if( r24 < r9 ) goto label$658e279_12_365;
	r24 = 0;
	if( r24 >= r10 ) goto label$658e279_12_398;
	if( !r35 ) goto label$658e279_12_398;
	label$658e279_12_365:
	r24 = 0;
	if( r9 != r24 ) goto label$658e279_12_373;
	r36 = r35;
	if( r35 == NULL ) hl_null_access();
	r38 = r35->next;
	r35 = r38;
	--r10;
	goto label$658e279_12_391;
	label$658e279_12_373:
	r24 = 0;
	if( r10 == r24 ) goto label$658e279_12_380;
	if( !r35 ) goto label$658e279_12_380;
	if( r32 == NULL ) hl_null_access();
	r23 = r32->hasValue ? ((int (*)(vdynamic*,hxd__snd__Channel,hxd__snd__Channel))r32->fun)((vdynamic*)r32->value,r33,r35) : ((int (*)(hxd__snd__Channel,hxd__snd__Channel))r32->fun)(r33,r35);
	r24 = 0;
	if( r24 < r23 ) goto label$658e279_12_386;
	label$658e279_12_380:
	r36 = r33;
	if( r33 == NULL ) hl_null_access();
	r38 = r33->next;
	r33 = r38;
	--r9;
	goto label$658e279_12_391;
	label$658e279_12_386:
	r36 = r35;
	if( r35 == NULL ) hl_null_access();
	r38 = r35->next;
	r35 = r38;
	--r10;
	label$658e279_12_391:
	if( !r34 ) goto label$658e279_12_395;
	if( r34 == NULL ) hl_null_access();
	r34->next = r36;
	goto label$658e279_12_396;
	label$658e279_12_395:
	r5 = r36;
	label$658e279_12_396:
	r34 = r36;
	goto label$658e279_12_359;
	label$658e279_12_398:
	r33 = r35;
	goto label$658e279_12_340;
	label$658e279_12_400:
	if( r34 == NULL ) hl_null_access();
	r39 = NULL;
	r34->next = r39;
	r24 = 1;
	if( r24 < r16 ) goto label$658e279_12_406;
	goto label$658e279_12_410;
	label$658e279_12_406:
	r24 = 2;
	r23 = r7 * r24;
	r7 = r23;
	goto label$658e279_12_330;
	label$658e279_12_410:
	r27 = r5;
	label$658e279_12_411:
	r0->channels = r27;
	r7 = 0;
	r33 = r0->channels;
	label$658e279_12_414:
	if( !r33 ) goto label$658e279_12_460;
	if( r33 == NULL ) hl_null_access();
	r21 = r33->isVirtual;
	if( r21 ) goto label$658e279_12_460;
	++r7;
	r8 = r0->sources;
	if( r8 == NULL ) hl_null_access();
	r9 = r8->length;
	if( r9 >= r7 ) goto label$658e279_12_427;
	r21 = true;
	r33->isVirtual = r21;
	goto label$658e279_12_457;
	label$658e279_12_427:
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r9 = r40->maxAudible;
	r10 = 0;
	if( r9 < r10 ) goto label$658e279_12_457;
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r2 = r40->lastUpdate;
	r3 = r0->now;
	if( r2 == r3 ) goto label$658e279_12_445;
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r2 = r0->now;
	r40->lastUpdate = r2;
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r9 = 0;
	r40->numAudible = r9;
	label$658e279_12_445:
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r9 = r40->numAudible;
	++r9;
	r40->numAudible = r9;
	r40 = r33->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r10 = r40->maxAudible;
	if( r10 >= r9 ) goto label$658e279_12_457;
	r21 = true;
	r33->isVirtual = r21;
	--r7;
	label$658e279_12_457:
	r34 = r33->next;
	r33 = r34;
	goto label$658e279_12_414;
	label$658e279_12_460:
	r9 = 0;
	r8 = r0->sources;
	label$658e279_12_462:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_484;
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_470;
	r12 = NULL;
	goto label$658e279_12_473;
	label$658e279_12_470:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r12 = (hxd__snd__Source)r13;
	label$658e279_12_473:
	++r9;
	if( r12 == NULL ) hl_null_access();
	r34 = r12->channel;
	if( !r34 ) goto label$658e279_12_481;
	r34 = r12->channel;
	if( r34 == NULL ) hl_null_access();
	r21 = r34->isVirtual;
	if( r21 ) goto label$658e279_12_482;
	label$658e279_12_481:
	goto label$658e279_12_462;
	label$658e279_12_482:
	hxd_snd_Manager_releaseSource(r0,r12);
	goto label$658e279_12_462;
	label$658e279_12_484:
	r34 = r0->channels;
	label$658e279_12_485:
	if( !r34 ) goto label$658e279_12_551;
	if( r34 == NULL ) hl_null_access();
	r12 = r34->source;
	if( r12 ) goto label$658e279_12_492;
	r21 = r34->isVirtual;
	if( !r21 ) goto label$658e279_12_495;
	label$658e279_12_492:
	r35 = r34->next;
	r34 = r35;
	goto label$658e279_12_485;
	label$658e279_12_495:
	r12 = NULL;
	r9 = 0;
	r8 = r0->sources;
	label$658e279_12_498:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_516;
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_506;
	r15 = NULL;
	goto label$658e279_12_509;
	label$658e279_12_506:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r15 = (hxd__snd__Source)r13;
	label$658e279_12_509:
	++r9;
	if( r15 == NULL ) hl_null_access();
	r35 = r15->channel;
	if( r35 ) goto label$658e279_12_515;
	r12 = r15;
	goto label$658e279_12_516;
	label$658e279_12_515:
	goto label$658e279_12_498;
	label$658e279_12_516:
	if( r12 ) goto label$658e279_12_520;
	r41 = (String)s$could_not_get_a_source;
	r13 = haxe_Exception_thrown(((vdynamic*)r41));
	hl_throw((vdynamic*)r13);
	label$658e279_12_520:
	if( r12 == NULL ) hl_null_access();
	r12->channel = r34;
	if( r34 == NULL ) hl_null_access();
	r34->source = r12;
	r25 = r34->sound;
	if( r25 == NULL ) hl_null_access();
	r26 = hxd_res_Sound_getData(r25);
	r40 = r34->soundGroup;
	if( r40 == NULL ) hl_null_access();
	r21 = r40->mono;
	r42 = &r21;
	r21 = hxd_snd_Manager_checkTargetFormat(r0,r26,r42);
	r2 = r34->position;
	r9 = r0->targetRate;
	r3 = (double)r9;
	r2 = r2 * r3;
	r9 = hl_math_floor(r2);
	r12->start = r9;
	r9 = r12->start;
	r10 = 0;
	if( r9 >= r10 ) goto label$658e279_12_543;
	r9 = 0;
	r12->start = r9;
	label$658e279_12_543:
	r25 = r34->sound;
	r9 = r12->start;
	r43 = hxd_snd_Manager_queueBuffer(r0,r12,r25,r9);
	r43 = false;
	r34->positionChanged = r43;
	r35 = r34->next;
	r34 = r35;
	goto label$658e279_12_485;
	label$658e279_12_551:
	r44 = NULL;
	r43 = r0->hasMasterVolume;
	if( !r43 ) goto label$658e279_12_556;
	r2 = 1.;
	goto label$658e279_12_557;
	label$658e279_12_556:
	r2 = r0->masterVolume;
	label$658e279_12_557:
	r9 = 0;
	r8 = r0->sources;
	label$658e279_12_559:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_713;
	r10 = r9;
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_568;
	r12 = NULL;
	goto label$658e279_12_571;
	label$658e279_12_568:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r12 = (hxd__snd__Source)r13;
	label$658e279_12_571:
	++r9;
	if( r12 == NULL ) hl_null_access();
	r35 = r12->channel;
	if( r35 ) goto label$658e279_12_576;
	goto label$658e279_12_559;
	label$658e279_12_576:
	if( r35 == NULL ) hl_null_access();
	r3 = r35->currentVolume;
	r3 = r3 * r2;
	r45 = r12->volume;
	if( r45 == r3 ) goto label$658e279_12_603;
	r46 = 0.;
	if( !(r3 < r46) ) goto label$658e279_12_585;
	r45 = 0.;
	r3 = r45;
	label$658e279_12_585:
	r12->volume = r3;
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r22 = r12->handle;
	if( hl_vfields(r20)[3] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,double))hl_vfields(r20)[3])(r20->value,r22,r3); else {
		void *args[] = {r22,&r3};
		hl_dyn_call_obj(r20->value,&t$fun_1e57f8c,336574822/*setSourceVolume*/,args,NULL);
	}
	r46 = 1.;
	if( !(r46 < r3) ) goto label$658e279_12_603;
	r41 = (String)s$Could_not_set_volume_;
	r47 = &r10;
	r48 = hl_ftos(r3,r47);
	r49 = String___alloc__(r48,r10);
	r41 = String___add__(r41,r49);
	r49 = (String)s$_on_;
	r41 = String___add__(r41,r49);
	r25 = r35->sound;
	r49 = Std_string(((vdynamic*)r25));
	r41 = String___add__(r41,r49);
	Sys_println(((vdynamic*)r41));
	label$658e279_12_603:
	r43 = r12->playing;
	if( r43 ) goto label$658e279_12_611;
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r22 = r12->handle;
	if( hl_vfields(r20)[8] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r20)[8])(r20->value,r22); else {
		void *args[] = {r22};
		hl_dyn_call_obj(r20->value,&t$fun_ba44378,-118144662/*playSource*/,args,NULL);
	}
	r43 = true;
	r12->playing = r43;
	label$658e279_12_611:
	r11 = r35->bindedEffects;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->length;
	label$658e279_12_614:
	--r10;
	r16 = 0;
	if( r10 < r16 ) goto label$658e279_12_644;
	if( r35 == NULL ) hl_null_access();
	r11 = r35->bindedEffects;
	if( r11 == NULL ) hl_null_access();
	r23 = r11->length;
	if( ((unsigned)r10) < ((unsigned)r23) ) goto label$658e279_12_625;
	r50 = NULL;
	goto label$658e279_12_628;
	label$658e279_12_625:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r10];
	r50 = (hxd__snd__Effect)r13;
	label$658e279_12_628:
	r11 = r35->effects;
	if( r11 == NULL ) hl_null_access();
	r52 = NULL;
	r16 = hl_types_ArrayObj_indexOf(r11,((vdynamic*)r50),r52);
	r23 = 0;
	if( r16 >= r23 ) goto label$658e279_12_643;
	r31 = r35->channelGroup;
	if( r31 == NULL ) hl_null_access();
	r11 = r31->effects;
	if( r11 == NULL ) hl_null_access();
	r52 = NULL;
	r16 = hl_types_ArrayObj_indexOf(r11,((vdynamic*)r50),r52);
	r23 = 0;
	if( r16 >= r23 ) goto label$658e279_12_643;
	hxd_snd_Manager_unbindEffect(r0,r35,r12,r50);
	label$658e279_12_643:
	goto label$658e279_12_614;
	label$658e279_12_644:
	r16 = 0;
	if( r35 == NULL ) hl_null_access();
	r31 = r35->channelGroup;
	if( r31 == NULL ) hl_null_access();
	r11 = r31->effects;
	label$658e279_12_649:
	if( r11 == NULL ) hl_null_access();
	r24 = r11->length;
	if( r16 >= r24 ) goto label$658e279_12_670;
	r24 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r24) ) goto label$658e279_12_657;
	r50 = NULL;
	goto label$658e279_12_660;
	label$658e279_12_657:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r50 = (hxd__snd__Effect)r13;
	label$658e279_12_660:
	++r16;
	if( r35 == NULL ) hl_null_access();
	r17 = r35->bindedEffects;
	if( r17 == NULL ) hl_null_access();
	r52 = NULL;
	r23 = hl_types_ArrayObj_indexOf(r17,((vdynamic*)r50),r52);
	r24 = 0;
	if( r23 >= r24 ) goto label$658e279_12_669;
	hxd_snd_Manager_bindEffect(r0,r35,r12,r50);
	label$658e279_12_669:
	goto label$658e279_12_649;
	label$658e279_12_670:
	r16 = 0;
	if( r35 == NULL ) hl_null_access();
	r11 = r35->effects;
	label$658e279_12_673:
	if( r11 == NULL ) hl_null_access();
	r24 = r11->length;
	if( r16 >= r24 ) goto label$658e279_12_694;
	r24 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r24) ) goto label$658e279_12_681;
	r50 = NULL;
	goto label$658e279_12_684;
	label$658e279_12_681:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r50 = (hxd__snd__Effect)r13;
	label$658e279_12_684:
	++r16;
	if( r35 == NULL ) hl_null_access();
	r17 = r35->bindedEffects;
	if( r17 == NULL ) hl_null_access();
	r52 = NULL;
	r23 = hl_types_ArrayObj_indexOf(r17,((vdynamic*)r50),r52);
	r24 = 0;
	if( r23 >= r24 ) goto label$658e279_12_693;
	hxd_snd_Manager_bindEffect(r0,r35,r12,r50);
	label$658e279_12_693:
	goto label$658e279_12_673;
	label$658e279_12_694:
	r16 = 0;
	if( r35 == NULL ) hl_null_access();
	r11 = r35->bindedEffects;
	label$658e279_12_697:
	if( r11 == NULL ) hl_null_access();
	r24 = r11->length;
	if( r16 >= r24 ) goto label$658e279_12_712;
	r24 = r11->length;
	if( ((unsigned)r16) < ((unsigned)r24) ) goto label$658e279_12_705;
	r50 = NULL;
	goto label$658e279_12_708;
	label$658e279_12_705:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r16];
	r50 = (hxd__snd__Effect)r13;
	label$658e279_12_708:
	++r16;
	r51 = hxd_snd_Manager_regEffect(r44,r50);
	r44 = r51;
	goto label$658e279_12_697;
	label$658e279_12_712:
	goto label$658e279_12_559;
	label$658e279_12_713:
	r50 = r44;
	r54 = hl_alloc_closure_ptr(&t$fun_cbf2617,hxd_snd_Manager_sortEffect,r0);
	if( r44 ) goto label$658e279_12_719;
	r51 = NULL;
	r44 = r51;
	goto label$658e279_12_803;
	label$658e279_12_719:
	r9 = 1;
	r10 = 0;
	r16 = 0;
	label$658e279_12_722:
	r43 = true;
	if( !r43 ) goto label$658e279_12_802;
	r51 = r50;
	r53 = NULL;
	r50 = r53;
	r55 = NULL;
	r53 = r55;
	r24 = 0;
	r23 = r24;
	label$658e279_12_732:
	if( !r51 ) goto label$658e279_12_792;
	++r23;
	r55 = r51;
	r24 = 0;
	r10 = r24;
	r24 = 0;
	r37 = r9;
	label$658e279_12_740:
	if( r24 >= r37 ) goto label$658e279_12_750;
	++r24;
	++r10;
	if( r55 == NULL ) hl_null_access();
	r56 = r55->next;
	r55 = r56;
	if( r56 ) goto label$658e279_12_749;
	goto label$658e279_12_750;
	label$658e279_12_749:
	goto label$658e279_12_740;
	label$658e279_12_750:
	r16 = r9;
	label$658e279_12_751:
	r37 = 0;
	if( r37 < r10 ) goto label$658e279_12_757;
	r37 = 0;
	if( r37 >= r16 ) goto label$658e279_12_790;
	if( !r55 ) goto label$658e279_12_790;
	label$658e279_12_757:
	r37 = 0;
	if( r10 != r37 ) goto label$658e279_12_765;
	r56 = r55;
	if( r55 == NULL ) hl_null_access();
	r57 = r55->next;
	r55 = r57;
	--r16;
	goto label$658e279_12_783;
	label$658e279_12_765:
	r37 = 0;
	if( r16 == r37 ) goto label$658e279_12_772;
	if( !r55 ) goto label$658e279_12_772;
	if( r54 == NULL ) hl_null_access();
	r24 = r54->hasValue ? ((int (*)(vdynamic*,hxd__snd__Effect,hxd__snd__Effect))r54->fun)((vdynamic*)r54->value,r51,r55) : ((int (*)(hxd__snd__Effect,hxd__snd__Effect))r54->fun)(r51,r55);
	r37 = 0;
	if( r37 < r24 ) goto label$658e279_12_778;
	label$658e279_12_772:
	r56 = r51;
	if( r51 == NULL ) hl_null_access();
	r57 = r51->next;
	r51 = r57;
	--r10;
	goto label$658e279_12_783;
	label$658e279_12_778:
	r56 = r55;
	if( r55 == NULL ) hl_null_access();
	r57 = r55->next;
	r55 = r57;
	--r16;
	label$658e279_12_783:
	if( !r53 ) goto label$658e279_12_787;
	if( r53 == NULL ) hl_null_access();
	r53->next = r56;
	goto label$658e279_12_788;
	label$658e279_12_787:
	r50 = r56;
	label$658e279_12_788:
	r53 = r56;
	goto label$658e279_12_751;
	label$658e279_12_790:
	r51 = r55;
	goto label$658e279_12_732;
	label$658e279_12_792:
	if( r53 == NULL ) hl_null_access();
	r58 = NULL;
	r53->next = r58;
	r37 = 1;
	if( r37 < r23 ) goto label$658e279_12_798;
	goto label$658e279_12_802;
	label$658e279_12_798:
	r37 = 2;
	r24 = r9 * r37;
	r9 = r24;
	goto label$658e279_12_722;
	label$658e279_12_802:
	r44 = r50;
	label$658e279_12_803:
	r51 = r44;
	label$658e279_12_804:
	if( !r51 ) goto label$658e279_12_813;
	if( r51 == NULL ) hl_null_access();
	r59 = r51->driver;
	if( r59 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect))r59->$type->vobj_proto[2])(r59,r51);
	r53 = r51->next;
	r51 = r53;
	goto label$658e279_12_804;
	label$658e279_12_813:
	r9 = 0;
	r8 = r0->sources;
	label$658e279_12_815:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_854;
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_823;
	r12 = NULL;
	goto label$658e279_12_826;
	label$658e279_12_823:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r12 = (hxd__snd__Source)r13;
	label$658e279_12_826:
	++r9;
	if( r12 == NULL ) hl_null_access();
	r35 = r12->channel;
	if( r35 ) goto label$658e279_12_831;
	goto label$658e279_12_815;
	label$658e279_12_831:
	r10 = 0;
	if( r35 == NULL ) hl_null_access();
	r11 = r35->bindedEffects;
	label$658e279_12_834:
	if( r11 == NULL ) hl_null_access();
	r23 = r11->length;
	if( r10 >= r23 ) goto label$658e279_12_853;
	r23 = r11->length;
	if( ((unsigned)r10) < ((unsigned)r23) ) goto label$658e279_12_842;
	r53 = NULL;
	goto label$658e279_12_845;
	label$658e279_12_842:
	r14 = r11->array;
	r13 = ((vdynamic**)(r14 + 1))[r10];
	r53 = (hxd__snd__Effect)r13;
	label$658e279_12_845:
	++r10;
	if( r53 == NULL ) hl_null_access();
	r59 = r53->driver;
	if( r59 == NULL ) hl_null_access();
	if( r12 == NULL ) hl_null_access();
	r22 = r12->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r59->$type->vobj_proto[4])(r59,r53,r22);
	goto label$658e279_12_834;
	label$658e279_12_853:
	goto label$658e279_12_815;
	label$658e279_12_854:
	r9 = 0;
	r8 = r0->effectGC;
	label$658e279_12_856:
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_882;
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_864;
	r53 = NULL;
	goto label$658e279_12_867;
	label$658e279_12_864:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r53 = (hxd__snd__Effect)r13;
	label$658e279_12_867:
	++r9;
	r3 = r0->now;
	if( r53 == NULL ) hl_null_access();
	r45 = r53->lastStamp;
	r3 = r3 - r45;
	r45 = r53->retainTime;
	if( !(r45 < r3) ) goto label$658e279_12_881;
	r59 = r53->driver;
	if( r59 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r59->$type->vobj_proto[1])(r59);
	r11 = r0->effectGC;
	if( r11 == NULL ) hl_null_access();
	r43 = hl_types_ArrayObj_remove(r11,((vdynamic*)r53));
	goto label$658e279_12_882;
	label$658e279_12_881:
	goto label$658e279_12_856;
	label$658e279_12_882:
	r3 = r0->now;
	hxd_snd_Manager_updateVirtualChannels(r0,r3);
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r60 = r61->direction;
	if( r60 == NULL ) hl_null_access();
	r3 = r60->x;
	r45 = r60->x;
	r3 = r3 * r45;
	r45 = r60->y;
	r46 = r60->y;
	r45 = r45 * r46;
	r3 = r3 + r45;
	r45 = r60->z;
	r46 = r60->z;
	r45 = r45 * r46;
	r3 = r3 + r45;
	r46 = 1.000000000000000036e-10;
	if( !(r3 < r46) ) goto label$658e279_12_904;
	r45 = 0.;
	r3 = r45;
	goto label$658e279_12_908;
	label$658e279_12_904:
	r45 = 1.;
	r46 = hl_math_sqrt(r3);
	r45 = r45 / r46;
	r3 = r45;
	label$658e279_12_908:
	r45 = r60->x;
	r45 = r45 * r3;
	r60->x = r45;
	r45 = r60->y;
	r45 = r45 * r3;
	r60->y = r45;
	r45 = r60->z;
	r45 = r45 * r3;
	r60->z = r45;
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r60 = r61->up;
	if( r60 == NULL ) hl_null_access();
	r3 = r60->x;
	r45 = r60->x;
	r3 = r3 * r45;
	r45 = r60->y;
	r46 = r60->y;
	r45 = r45 * r46;
	r3 = r3 + r45;
	r45 = r60->z;
	r46 = r60->z;
	r45 = r45 * r46;
	r3 = r3 + r45;
	r46 = 1.000000000000000036e-10;
	if( !(r3 < r46) ) goto label$658e279_12_937;
	r45 = 0.;
	r3 = r45;
	goto label$658e279_12_941;
	label$658e279_12_937:
	r45 = 1.;
	r46 = hl_math_sqrt(r3);
	r45 = r45 / r46;
	r3 = r45;
	label$658e279_12_941:
	r45 = r60->x;
	r45 = r45 * r3;
	r60->x = r45;
	r45 = r60->y;
	r45 = r45 * r3;
	r60->y = r45;
	r45 = r60->z;
	r45 = r45 * r3;
	r60->z = r45;
	r43 = r0->hasMasterVolume;
	if( !r43 ) goto label$658e279_12_956;
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r3 = r0->masterVolume;
	if( hl_vfields(r20)[4] ) ((void (*)(vdynamic*,double))hl_vfields(r20)[4])(r20->value,r3); else {
		void *args[] = {&r3};
		hl_dyn_call_obj(r20->value,&t$fun_2f12e14,-239921841/*setMasterVolume*/,args,NULL);
	}
	label$658e279_12_956:
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r60 = r61->position;
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r62 = r61->direction;
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r63 = r61->up;
	r61 = r0->listener;
	if( r61 == NULL ) hl_null_access();
	r64 = r61->velocity;
	if( hl_vfields(r20)[5] ) ((void (*)(vdynamic*,h3d__Vector,h3d__Vector,h3d__Vector,h3d__Vector))hl_vfields(r20)[5])(r20->value,r60,r62,r63,r64); else {
		void *args[] = {r60,r62,r63,r64};
		hl_dyn_call_obj(r20->value,&t$fun_32c178e,-111360484/*setListenerParams*/,args,NULL);
	}
	r20 = r0->driver;
	if( r20 == NULL ) hl_null_access();
	if( hl_vfields(r20)[0] ) ((void (*)(vdynamic*))hl_vfields(r20)[0])(r20->value); else {
		hl_dyn_call_obj(r20->value,&t$fun_4c7a70a,-419068806/*update*/,NULL,NULL);
	}
	r9 = r0->soundBufferCount;
	r29 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r10 = r29->SOUND_BUFFER_CACHE_SIZE;
	if( r9 < r10 ) goto label$658e279_12_1020;
	r3 = hl_sys_time();
	r9 = 0;
	label$658e279_12_980:
	r8 = r0->soundBufferKeys;
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( r9 >= r16 ) goto label$658e279_12_1020;
	r8 = r0->soundBufferKeys;
	if( r8 == NULL ) hl_null_access();
	r16 = r8->length;
	if( ((unsigned)r9) < ((unsigned)r16) ) goto label$658e279_12_991;
	r41 = NULL;
	goto label$658e279_12_994;
	label$658e279_12_991:
	r14 = r8->array;
	r13 = ((vdynamic**)(r14 + 1))[r9];
	r41 = (String)r13;
	label$658e279_12_994:
	r65 = r0->soundBufferMap;
	if( r65 == NULL ) hl_null_access();
	r13 = haxe_ds_StringMap_get(r65,r41);
	r18 = (hxd__snd__Buffer)r13;
	++r9;
	if( r18 == NULL ) hl_null_access();
	r10 = r18->refs;
	r16 = 0;
	if( r16 < r10 ) goto label$658e279_12_1007;
	r45 = r18->lastStop;
	r46 = 60.;
	r45 = r45 + r46;
	if( !(r3 < r45) ) goto label$658e279_12_1008;
	label$658e279_12_1007:
	goto label$658e279_12_980;
	label$658e279_12_1008:
	r65 = r0->soundBufferMap;
	if( r65 == NULL ) hl_null_access();
	r43 = haxe_ds_StringMap_remove(r65,r41);
	r8 = r0->soundBufferKeys;
	if( r8 == NULL ) hl_null_access();
	r43 = hl_types_ArrayObj_remove(r8,((vdynamic*)r41));
	--r9;
	hxd_snd_Buffer_dispose(r18);
	r10 = r0->soundBufferCount;
	--r10;
	r0->soundBufferCount = r10;
	goto label$658e279_12_980;
	label$658e279_12_1020:
	return;
}

bool hxd_snd_Manager_progressiveDecodeBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,int r3) {
	haxe__io__Bytes r16;
	bool r14;
	hxd__res__Sound r5;
	hxd__snd__$Manager r9;
	hxd__snd__Data r4;
	double r8, r10;
	int r7, r11, r12, r13, r15, r17, r18;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r2);
	r9 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r7 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r8 = (double)r7;
	r9 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r7 = r9->BUFFER_STREAM_SPLIT;
	r10 = (double)r7;
	r8 = r8 / r10;
	r7 = hl_math_ceil(r8);
	if( r1 == NULL ) hl_null_access();
	r11 = r1->streamStart;
	if( r11 != r3 ) goto label$658e279_13_15;
	r5 = r1->streamSound;
	if( r5 == r2 ) goto label$658e279_13_18;
	label$658e279_13_15:
	r1->streamSound = r2;
	r1->streamStart = r3;
	r1->streamPos = r3;
	label$658e279_13_18:
	r9 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r12 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r11 = r3 + r12;
	r12 = r1->streamPos;
	if( r12 != r11 ) goto label$658e279_13_25;
	r14 = true;
	return r14;
	label$658e279_13_25:
	if( r4 == NULL ) hl_null_access();
	r12 = hxd_snd_Data_getBytesPerSample(r4);
	r9 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r13 = r9->STREAM_BUFFER_SAMPLE_COUNT;
	r13 = r13 * r12;
	r16 = r1->streamBuffer;
	if( !r16 ) goto label$658e279_13_36;
	r16 = r1->streamBuffer;
	if( r16 == NULL ) hl_null_access();
	r15 = r16->length;
	if( r15 >= r13 ) goto label$658e279_13_39;
	label$658e279_13_36:
	r16 = haxe_io_Bytes_alloc(r13);
	r1->streamBuffer = r16;
	r1->streamPos = r3;
	label$658e279_13_39:
	r17 = r1->streamPos;
	r15 = r11 - r17;
	if( r7 >= r15 ) goto label$658e279_13_43;
	r15 = r7;
	label$658e279_13_43:
	r16 = r1->streamBuffer;
	r17 = r1->streamPos;
	r17 = r17 - r3;
	r17 = r17 * r12;
	r18 = r1->streamPos;
	hxd_snd_Data_decode(r4,r16,r17,r18,r15);
	r17 = r1->streamPos;
	r17 = r17 + r15;
	r1->streamPos = r17;
	r17 = r1->streamPos;
	if( r17 == r11 ) goto label$658e279_13_56;
	r14 = false;
	goto label$658e279_13_57;
	label$658e279_13_56:
	r14 = true;
	label$658e279_13_57:
	return r14;
}

bool hxd_snd_Manager_queueBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,int r3) {
	hxd__snd__Buffer r8, r12;
	hxd__snd__openal__SourceHandle r14;
	hl__types__ArrayObj r18;
	hxd__snd__openal__BufferHandle r15;
	vvirtual *r13;
	bool r17;
	hxd__snd__Channel r7;
	hxd__snd__$Manager r11;
	hxd__snd__Data r4;
	double r9, r10;
	hxd__snd__SoundGroup r6;
	int r16, r19;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r2);
	if( r1 == NULL ) hl_null_access();
	r7 = r1->channel;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->soundGroup;
	r8 = NULL;
	if( r4 == NULL ) hl_null_access();
	r9 = hxd_snd_Data_get_duration(r4);
	r11 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r10 = r11->STREAM_DURATION;
	if( !(r10 >= r9) ) goto label$658e279_14_21;
	r12 = hxd_snd_Manager_getSoundBuffer(r0,r2,r6);
	r13 = r0->driver;
	if( r13 == NULL ) hl_null_access();
	r14 = r1->handle;
	if( r12 == NULL ) hl_null_access();
	r15 = r12->handle;
	r17 = true;
	if( hl_vfields(r13)[7] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle,int,bool))hl_vfields(r13)[7])(r13->value,r14,r15,r3,r17); else {
		void *args[] = {r14,r15,&r3,&r17};
		hl_dyn_call_obj(r13->value,&t$fun_b8a20fe,-291258398/*queueBuffer*/,args,NULL);
	}
	goto label$658e279_14_43;
	label$658e279_14_21:
	r18 = r1->buffers;
	if( r18 == NULL ) hl_null_access();
	r16 = r18->length;
	r19 = 0;
	if( r19 >= r16 ) goto label$658e279_14_34;
	r11 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r16 = r11->BUFFER_STREAM_SPLIT;
	r19 = 1;
	if( r19 >= r16 ) goto label$658e279_14_34;
	r17 = hxd_snd_Manager_progressiveDecodeBuffer(r0,r1,r2,r3);
	if( r17 ) goto label$658e279_14_34;
	r17 = false;
	return r17;
	label$658e279_14_34:
	r12 = hxd_snd_Manager_getStreamBuffer(r0,r1,r2,r6,r3);
	r13 = r0->driver;
	if( r13 == NULL ) hl_null_access();
	r14 = r1->handle;
	if( r12 == NULL ) hl_null_access();
	r15 = r12->handle;
	r16 = 0;
	r17 = r12->isEnd;
	if( hl_vfields(r13)[7] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle,int,bool))hl_vfields(r13)[7])(r13->value,r14,r15,r16,r17); else {
		void *args[] = {r14,r15,&r16,&r17};
		hl_dyn_call_obj(r13->value,&t$fun_b8a20fe,-291258398/*queueBuffer*/,args,NULL);
	}
	label$658e279_14_43:
	r18 = r1->buffers;
	if( r18 == NULL ) hl_null_access();
	r16 = hl_types_ArrayObj_push(r18,((vdynamic*)r12));
	r17 = true;
	return r17;
}

hxd__snd__Buffer hxd_snd_Manager_unqueueBuffer(hxd__snd__Manager r0,hxd__snd__Source r1) {
	hxd__snd__Buffer r4, r6;
	hxd__snd__openal__SourceHandle r8;
	hxd__snd__openal__BufferHandle r9;
	vvirtual *r7;
	hl__types__ArrayObj r3;
	bool r10;
	double r13;
	vdynamic *r2;
	int r11, r12;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->buffers;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_shift(r3);
	r4 = (hxd__snd__Buffer)r2;
	if( r4 ) goto label$658e279_15_8;
	r6 = NULL;
	return r6;
	label$658e279_15_8:
	r7 = r0->driver;
	if( r7 == NULL ) hl_null_access();
	r8 = r1->handle;
	if( r4 == NULL ) hl_null_access();
	r9 = r4->handle;
	if( hl_vfields(r7)[1] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle,hxd__snd__openal__BufferHandle))hl_vfields(r7)[1])(r7->value,r8,r9); else {
		void *args[] = {r8,r9};
		hl_dyn_call_obj(r7->value,&t$fun_5200ae0,-270649682/*unqueueBuffer*/,args,NULL);
	}
	r10 = r4->isStream;
	if( !r10 ) goto label$658e279_15_20;
	r3 = r0->freeStreamBuffers;
	if( r3 == NULL ) hl_null_access();
	hl_types_ArrayObj_unshift(r3,((vdynamic*)r4));
	goto label$658e279_15_27;
	label$658e279_15_20:
	r11 = r4->refs;
	--r11;
	r4->refs = r11;
	r12 = 0;
	if( r11 != r12 ) goto label$658e279_15_27;
	r13 = hl_sys_time();
	r4->lastStop = r13;
	label$658e279_15_27:
	return r4;
}

hxd__snd__Effect hxd_snd_Manager_regEffect(hxd__snd__Effect r0,hxd__snd__Effect r1) {
	hxd__snd__Effect r2, r3;
	r2 = r0;
	label$658e279_16_1:
	if( !r2 ) goto label$658e279_16_9;
	if( r2 != r1 ) goto label$658e279_16_5;
	return r0;
	label$658e279_16_5:
	if( r2 == NULL ) hl_null_access();
	r3 = r2->next;
	r2 = r3;
	goto label$658e279_16_1;
	label$658e279_16_9:
	if( r1 == NULL ) hl_null_access();
	r1->next = r0;
	return r1;
}

void hxd_snd_Manager_bindEffect(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Source r2,hxd__snd__Effect r3) {
	hxd__snd__openal__SourceHandle r10;
	hl__types__ArrayObj r8;
	hxd__snd__EffectDriver r9;
	bool r7;
	int r5, r6;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->refs;
	r6 = 0;
	if( r5 != r6 ) goto label$658e279_17_11;
	r8 = r0->effectGC;
	if( r8 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_remove(r8,((vdynamic*)r3));
	if( r7 ) goto label$658e279_17_11;
	r9 = r3->driver;
	if( r9 == NULL ) hl_null_access();
	((void (*)(hxd__snd__EffectDriver))r9->$type->vobj_proto[0])(r9);
	label$658e279_17_11:
	r5 = r3->refs;
	++r5;
	r3->refs = r5;
	r9 = r3->driver;
	if( r9 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r10 = r2->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r9->$type->vobj_proto[3])(r9,r3,r10);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->bindedEffects;
	if( r8 == NULL ) hl_null_access();
	r5 = hl_types_ArrayObj_push(r8,((vdynamic*)r3));
	return;
}

void hxd_snd_Manager_unbindEffect(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Source r2,hxd__snd__Effect r3) {
	hxd__snd__openal__SourceHandle r6;
	hl__types__ArrayObj r8;
	bool r7;
	hxd__snd__EffectDriver r5;
	double r11;
	int r9, r10;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->driver;
	if( r5 == NULL ) hl_null_access();
	if( r2 == NULL ) hl_null_access();
	r6 = r2->handle;
	((void (*)(hxd__snd__EffectDriver,hxd__snd__Effect,hxd__snd__openal__SourceHandle))r5->$type->vobj_proto[5])(r5,r3,r6);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->bindedEffects;
	if( r8 == NULL ) hl_null_access();
	r7 = hl_types_ArrayObj_remove(r8,((vdynamic*)r3));
	r9 = r3->refs;
	--r9;
	r3->refs = r9;
	r10 = 0;
	if( r9 != r10 ) goto label$658e279_18_20;
	r11 = r0->now;
	r3->lastStamp = r11;
	r8 = r0->effectGC;
	if( r8 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r8,((vdynamic*)r3));
	label$658e279_18_20:
	return;
}

void hxd_snd_Manager_releaseSource(hxd__snd__Manager r0,hxd__snd__Source r1) {
	hxd__snd__Buffer r17;
	hxd__snd__openal__SourceHandle r15;
	vvirtual *r14;
	hl__types__ArrayObj r6;
	hl_type *r12;
	bool r13;
	hxd__snd__Effect r9;
	hxd__snd__Source r4;
	hxd__snd__Channel r3;
	double r16;
	vdynamic *r10;
	varray *r11;
	int r5, r7, r8;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	if( !r3 ) goto label$658e279_19_39;
	r5 = 0;
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->bindedEffects;
	if( r6 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_copy(r6);
	label$658e279_19_9:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r5 >= r8 ) goto label$658e279_19_25;
	r8 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$658e279_19_17;
	r9 = NULL;
	goto label$658e279_19_20;
	label$658e279_19_17:
	r11 = r6->array;
	r10 = ((vdynamic**)(r11 + 1))[r5];
	r9 = (hxd__snd__Effect)r10;
	label$658e279_19_20:
	++r5;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	hxd_snd_Manager_unbindEffect(r0,r3,r1,r9);
	goto label$658e279_19_9;
	label$658e279_19_25:
	if( r1 == NULL ) hl_null_access();
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r12 = &t$hxd_snd_Effect;
	r5 = 0;
	r11 = hl_alloc_array(r12,r5);
	r6 = hl_types_ArrayObj_alloc(r11);
	r3->bindedEffects = r6;
	r3 = r1->channel;
	if( r3 == NULL ) hl_null_access();
	r4 = NULL;
	r3->source = r4;
	r3 = NULL;
	r1->channel = r3;
	label$658e279_19_39:
	r13 = r1->playing;
	if( !r13 ) goto label$658e279_19_49;
	r13 = false;
	r1->playing = r13;
	r14 = r0->driver;
	if( r14 == NULL ) hl_null_access();
	r15 = r1->handle;
	if( hl_vfields(r14)[2] ) ((void (*)(vdynamic*,hxd__snd__openal__SourceHandle))hl_vfields(r14)[2])(r14->value,r15); else {
		void *args[] = {r15};
		hl_dyn_call_obj(r14->value,&t$fun_ba44378,467731335/*stopSource*/,args,NULL);
	}
	r16 = -1.;
	r1->volume = r16;
	label$658e279_19_49:
	if( r1 == NULL ) hl_null_access();
	r6 = r1->buffers;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->length;
	r7 = 0;
	if( r7 >= r5 ) goto label$658e279_19_58;
	r17 = hxd_snd_Manager_unqueueBuffer(r0,r1);
	goto label$658e279_19_49;
	label$658e279_19_58:
	return;
}

bool hxd_snd_Manager_checkTargetFormat(hxd__snd__Manager r0,hxd__snd__Data r1,bool* r2) {
	venum *r7, *r8, *r9;
	bool r3, r5;
	int r4, r6;
	if( r2 ) goto label$658e279_20_3;
	r3 = false;
	goto label$658e279_20_4;
	label$658e279_20_3:
	r3 = *r2;
	label$658e279_20_4:
	if( r1 == NULL ) hl_null_access();
	r4 = r1->samplingRate;
	r0->targetRate = r4;
	if( r3 ) goto label$658e279_20_11;
	r4 = r1->channels;
	r6 = 1;
	if( r4 != r6 ) goto label$658e279_20_13;
	label$658e279_20_11:
	r4 = 1;
	goto label$658e279_20_14;
	label$658e279_20_13:
	r4 = 2;
	label$658e279_20_14:
	r0->targetChannels = r4;
	r7 = r1->sampleFormat;
	if( r7 == NULL ) hl_null_access();
	r4 = HL__ENUM_INDEX__(r7);
	switch(r4) {
		default:
			goto label$658e279_20_28;
		case 0:
			r8 = (venum*)g$hxd_snd_SampleFormat_UI8;
			r7 = r8;
			goto label$658e279_20_28;
		case 1:
			r8 = (venum*)g$hxd_snd_SampleFormat_I16;
			r7 = r8;
			goto label$658e279_20_28;
		case 2:
			r8 = (venum*)g$hxd_snd_SampleFormat_I16;
			r7 = r8;
	}
	label$658e279_20_28:
	r0->targetFormat = r7;
	r4 = r0->targetChannels;
	r6 = r1->channels;
	if( r4 != r6 ) goto label$658e279_20_42;
	r8 = r0->targetFormat;
	r9 = r1->sampleFormat;
	if( r8 != r9 ) goto label$658e279_20_42;
	r4 = r0->targetRate;
	r6 = r1->samplingRate;
	if( r4 == r6 ) goto label$658e279_20_40;
	r5 = false;
	goto label$658e279_20_41;
	label$658e279_20_40:
	r5 = true;
	label$658e279_20_41:
	return r5;
	label$658e279_20_42:
	r5 = false;
	return r5;
}

void hxd_snd_Manager_getSoundBuffer__$1(venum* r0) {
	bool *r11;
	hxd__snd__Buffer r6;
	hl__types__ArrayObj r3;
	bool r10;
	hxd__snd__Manager r2;
	hxd__snd__Data r9;
	vdynamic *r7;
	varray *r8;
	int r4, r5;
	r2 = ((Enumt$ctx_a402b52*)r0)->p3;
	if( r2 == NULL ) hl_null_access();
	r3 = ((Enumt$ctx_a402b52*)r0)->p2;
	if( r3 == NULL ) hl_null_access();
	r4 = 0;
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$658e279_21_9;
	r6 = NULL;
	goto label$658e279_21_12;
	label$658e279_21_9:
	r8 = r3->array;
	r7 = ((vdynamic**)(r8 + 1))[r4];
	r6 = (hxd__snd__Buffer)r7;
	label$658e279_21_12:
	r9 = ((Enumt$ctx_a402b52*)r0)->p0;
	r10 = ((Enumt$ctx_a402b52*)r0)->p1;
	r11 = &r10;
	hxd_snd_Manager_fillSoundBuffer(r2,r6,r9,r11);
	return;
}

hxd__snd__Buffer hxd_snd_Manager_getSoundBuffer(hxd__snd__Manager r0,hxd__res__Sound r1,hxd__snd__SoundGroup r2) {
	hxd__snd__Buffer r18;
	hxd__fs__FileEntry r7;
	String r6, r11, r12;
	vvirtual *r20;
	haxe__ds__StringMap r17;
	hl__types__ArrayObj r13, r19;
	venum *r22;
	hl_type *r15;
	bool r5, r8;
	hxd__snd__Data r4;
	vclosure *r21;
	vdynamic *r16;
	varray *r14;
	int r9, r10;
	if( r1 == NULL ) hl_null_access();
	r4 = hxd_res_Sound_getData(r1);
	if( r2 == NULL ) hl_null_access();
	r5 = r2->mono;
	r7 = r1->entry;
	if( r7 == NULL ) hl_null_access();
	r6 = ((String (*)(hxd__fs__FileEntry))r7->$type->vobj_proto[15])(r7);
	if( !r5 ) goto label$658e279_22_15;
	if( r4 == NULL ) hl_null_access();
	r9 = r4->channels;
	r10 = 1;
	if( r9 == r10 ) goto label$658e279_22_15;
	r12 = (String)s$mono;
	r11 = String___add__(r6,r12);
	r6 = r11;
	label$658e279_22_15:
	r15 = &t$hxd_snd_Buffer;
	r9 = 1;
	r14 = hl_alloc_array(r15,r9);
	r17 = r0->soundBufferMap;
	if( r17 == NULL ) hl_null_access();
	r16 = haxe_ds_StringMap_get(r17,r6);
	r18 = (hxd__snd__Buffer)r16;
	r9 = 0;
	((hxd__snd__Buffer*)(r14 + 1))[r9] = r18;
	r13 = hl_types_ArrayObj_alloc(r14);
	if( r13 == NULL ) hl_null_access();
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_31;
	r18 = NULL;
	goto label$658e279_22_34;
	label$658e279_22_31:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_34:
	if( r18 ) goto label$658e279_22_101;
	r9 = 0;
	r18 = (hxd__snd__Buffer)hl_alloc_obj(&t$hxd_snd_Buffer);
	r20 = r0->driver;
	hxd_snd_Buffer_new(r18,r20);
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_42;
	hl_types_ArrayObj___expand(r13,r9);
	label$658e279_22_42:
	r14 = r13->array;
	((hxd__snd__Buffer*)(r14 + 1))[r9] = r18;
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_49;
	r18 = NULL;
	goto label$658e279_22_52;
	label$658e279_22_49:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_52:
	if( r18 == NULL ) hl_null_access();
	r8 = false;
	r18->isStream = r8;
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_60;
	r18 = NULL;
	goto label$658e279_22_63;
	label$658e279_22_60:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_63:
	if( r18 == NULL ) hl_null_access();
	r8 = true;
	r18->isEnd = r8;
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_71;
	r18 = NULL;
	goto label$658e279_22_74;
	label$658e279_22_71:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_74:
	if( r18 == NULL ) hl_null_access();
	r18->sound = r1;
	if( r4 == NULL ) hl_null_access();
	r22 = hl_alloc_enum(&t$ctx_a402b52,0);
	((Enumt$ctx_a402b52*)r22)->p0 = (hxd__snd__Data)r4;
	((Enumt$ctx_a402b52*)r22)->p1 = (bool)r5;
	((Enumt$ctx_a402b52*)r22)->p2 = (hl__types__ArrayObj)r13;
	((Enumt$ctx_a402b52*)r22)->p3 = (hxd__snd__Manager)r0;
	r21 = hl_alloc_closure_ptr(&t$fun_a762f40,hxd_snd_Manager_getSoundBuffer__$1,r22);
	hxd_snd_Data_load(r4,r21);
	r17 = r0->soundBufferMap;
	if( r17 == NULL ) hl_null_access();
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_91;
	r18 = NULL;
	goto label$658e279_22_94;
	label$658e279_22_91:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_94:
	haxe_ds_StringMap_set(r17,r6,((vdynamic*)r18));
	r19 = r0->soundBufferKeys;
	if( r19 == NULL ) hl_null_access();
	r9 = hl_types_ArrayObj_push(r19,((vdynamic*)r6));
	r9 = r0->soundBufferCount;
	++r9;
	r0->soundBufferCount = r9;
	label$658e279_22_101:
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_106;
	r18 = NULL;
	goto label$658e279_22_109;
	label$658e279_22_106:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_109:
	if( r18 == NULL ) hl_null_access();
	r9 = r18->refs;
	++r9;
	r18->refs = r9;
	r9 = 0;
	r10 = r13->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$658e279_22_118;
	r18 = NULL;
	goto label$658e279_22_121;
	label$658e279_22_118:
	r14 = r13->array;
	r16 = ((vdynamic**)(r14 + 1))[r9];
	r18 = (hxd__snd__Buffer)r16;
	label$658e279_22_121:
	return r18;
}

void hxd_snd_Manager_fillSoundBuffer(hxd__snd__Manager r0,hxd__snd__Buffer r1,hxd__snd__Data r2,bool* r3) {
	hxd__snd__openal__BufferHandle r15;
	vvirtual *r14;
	venum *r9;
	haxe__io__Bytes r11;
	bool r4, r6;
	hxd__snd__Data r7;
	int r8, r10, r12, r13;
	if( r3 ) goto label$658e279_23_3;
	r4 = false;
	goto label$658e279_23_4;
	label$658e279_23_3:
	r4 = *r3;
	label$658e279_23_4:
	r6 = r4;
	r3 = &r6;
	r6 = hxd_snd_Manager_checkTargetFormat(r0,r2,r3);
	if( r6 ) goto label$658e279_23_14;
	if( r2 == NULL ) hl_null_access();
	r8 = r0->targetRate;
	r9 = r0->targetFormat;
	r10 = r0->targetChannels;
	r7 = ((hxd__snd__Data (*)(hxd__snd__Data,int,venum*,int))r2->$type->vobj_proto[0])(r2,r8,r9,r10);
	r2 = r7;
	label$658e279_23_14:
	if( r2 == NULL ) hl_null_access();
	r8 = r2->samples;
	r10 = hxd_snd_Data_getBytesPerSample(r2);
	r8 = r8 * r10;
	r11 = hxd_snd_Manager_getTmpBytes(r0,r8);
	r10 = 0;
	r12 = 0;
	r13 = r2->samples;
	hxd_snd_Data_decode(r2,r11,r10,r12,r13);
	r14 = r0->driver;
	if( r14 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r15 = r1->handle;
	r9 = r0->targetFormat;
	r12 = r0->targetChannels;
	r13 = r0->targetRate;
	if( hl_vfields(r14)[6] ) ((void (*)(vdynamic*,hxd__snd__openal__BufferHandle,haxe__io__Bytes,int,venum*,int,int))hl_vfields(r14)[6])(r14->value,r15,r11,r8,r9,r12,r13); else {
		void *args[] = {r15,r11,&r8,r9,&r12,&r13};
		hl_dyn_call_obj(r14->value,&t$fun_c02af75,351010321/*setBufferData*/,args,NULL);
	}
	r10 = r0->targetRate;
	r1->sampleRate = r10;
	r10 = r2->samples;
	r1->samples = r10;
	return;
}

hxd__snd__Buffer hxd_snd_Manager_getStreamBuffer(hxd__snd__Manager r0,hxd__snd__Source r1,hxd__res__Sound r2,hxd__snd__SoundGroup r3,int r4) {
	bool *r22;
	hxd__snd__Buffer r10, r11;
	hxd__snd__openal__BufferHandle r30;
	vvirtual *r12;
	hl__types__ArrayObj r9;
	venum *r26;
	haxe__io__Bytes r19, r20;
	bool r13;
	hxd__res__Sound r6;
	hxd__snd__$Manager r15;
	hxd__snd__Data r5;
	double r23, r24, r25;
	vdynamic *r8;
	int r14, r16, r17, r18, r21, r27, r28, r29;
	if( r2 == NULL ) hl_null_access();
	r5 = hxd_res_Sound_getData(r2);
	r9 = r0->freeStreamBuffers;
	if( r9 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_shift(r9);
	r10 = (hxd__snd__Buffer)r8;
	if( r10 ) goto label$658e279_24_13;
	r11 = (hxd__snd__Buffer)hl_alloc_obj(&t$hxd_snd_Buffer);
	r12 = r0->driver;
	hxd_snd_Buffer_new(r11,r12);
	r10 = r11;
	r13 = true;
	r11->isStream = r13;
	label$658e279_24_13:
	r15 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r14 = r15->STREAM_BUFFER_SAMPLE_COUNT;
	r16 = r4 + r14;
	if( r5 == NULL ) hl_null_access();
	r17 = r5->samples;
	if( r16 < r17 ) goto label$658e279_24_26;
	r16 = r5->samples;
	r16 = r16 - r4;
	r14 = r16;
	if( r10 == NULL ) hl_null_access();
	r13 = true;
	r10->isEnd = r13;
	goto label$658e279_24_29;
	label$658e279_24_26:
	if( r10 == NULL ) hl_null_access();
	r13 = false;
	r10->isEnd = r13;
	label$658e279_24_29:
	r10->sound = r2;
	r10->samples = r14;
	r10->start = r4;
	r17 = hxd_snd_Data_getBytesPerSample(r5);
	r16 = r14 * r17;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->streamSound;
	if( r6 != r2 ) goto label$658e279_24_47;
	r17 = r1->streamStart;
	if( r17 != r4 ) goto label$658e279_24_47;
	label$658e279_24_39:
	r13 = hxd_snd_Manager_progressiveDecodeBuffer(r0,r1,r2,r4);
	if( r13 ) goto label$658e279_24_43;
	goto label$658e279_24_39;
	label$658e279_24_43:
	if( r1 == NULL ) hl_null_access();
	r20 = r1->streamBuffer;
	r19 = r20;
	goto label$658e279_24_51;
	label$658e279_24_47:
	r20 = hxd_snd_Manager_getTmpBytes(r0,r16);
	r19 = r20;
	r17 = 0;
	hxd_snd_Data_decode(r5,r20,r17,r4,r14);
	label$658e279_24_51:
	if( r3 == NULL ) hl_null_access();
	r13 = r3->mono;
	r22 = &r13;
	r13 = hxd_snd_Manager_checkTargetFormat(r0,r5,r22);
	if( r13 ) goto label$658e279_24_89;
	r23 = (double)r14;
	r17 = r0->targetRate;
	r24 = (double)r17;
	if( r5 == NULL ) hl_null_access();
	r17 = r5->samplingRate;
	r25 = (double)r17;
	r24 = r24 / r25;
	r23 = r23 * r24;
	r17 = hl_math_ceil(r23);
	r18 = r0->targetChannels;
	r17 = r17 * r18;
	r26 = r0->targetFormat;
	if( r26 == NULL ) hl_null_access();
	r18 = HL__ENUM_INDEX__(r26);
	switch(r18) {
		default:
			goto label$658e279_24_80;
		case 0:
			r21 = 1;
			r18 = r21;
			goto label$658e279_24_80;
		case 1:
			r21 = 2;
			r18 = r21;
			goto label$658e279_24_80;
		case 2:
			r21 = 4;
			r18 = r21;
	}
	label$658e279_24_80:
	r21 = r17 * r18;
	r16 = r21;
	r20 = hxd_snd_Manager_getResampleBytes(r0,r21);
	r21 = 0;
	r27 = 0;
	r28 = r0->targetRate;
	r26 = r0->targetFormat;
	r29 = r0->targetChannels;
	hxd_snd_Data_resampleBuffer(r5,r20,r21,r19,r27,r28,r26,r29,r14);
	label$658e279_24_89:
	r12 = r0->driver;
	if( r12 == NULL ) hl_null_access();
	if( r10 == NULL ) hl_null_access();
	r30 = r10->handle;
	r26 = r0->targetFormat;
	r18 = r0->targetChannels;
	r21 = r0->targetRate;
	if( hl_vfields(r12)[6] ) ((void (*)(vdynamic*,hxd__snd__openal__BufferHandle,haxe__io__Bytes,int,venum*,int,int))hl_vfields(r12)[6])(r12->value,r30,r20,r16,r26,r18,r21); else {
		void *args[] = {r30,r20,&r16,r26,&r18,&r21};
		hl_dyn_call_obj(r12->value,&t$fun_c02af75,351010321/*setBufferData*/,args,NULL);
	}
	r17 = r0->targetRate;
	r10->sampleRate = r17;
	return r10;
}

int hxd_snd_Manager_sortChannel(hxd__snd__Manager r0,hxd__snd__Channel r1,hxd__snd__Channel r2) {
	bool r3, r4;
	double r6, r8;
	hxd__snd__ChannelGroup r7;
	int r5, r9;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->isVirtual;
	if( r2 == NULL ) hl_null_access();
	r4 = r2->isVirtual;
	if( r3 == r4 ) goto label$658e279_25_11;
	r3 = r1->isVirtual;
	if( !r3 ) goto label$658e279_25_9;
	r5 = 1;
	return r5;
	label$658e279_25_9:
	r5 = -1;
	return r5;
	label$658e279_25_11:
	r7 = r1->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->priority;
	r7 = r2->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->priority;
	if( r6 == r8 ) goto label$658e279_25_29;
	r7 = r1->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->priority;
	r7 = r2->channelGroup;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->priority;
	if( !(r6 < r8) ) goto label$658e279_25_27;
	r5 = 1;
	return r5;
	label$658e279_25_27:
	r5 = -1;
	return r5;
	label$658e279_25_29:
	r6 = r1->priority;
	r8 = r2->priority;
	if( r6 == r8 ) goto label$658e279_25_39;
	r6 = r1->priority;
	r8 = r2->priority;
	if( !(r6 < r8) ) goto label$658e279_25_37;
	r5 = 1;
	return r5;
	label$658e279_25_37:
	r5 = -1;
	return r5;
	label$658e279_25_39:
	r6 = r1->audibleVolume;
	r8 = r2->audibleVolume;
	if( r6 == r8 ) goto label$658e279_25_49;
	r6 = r1->audibleVolume;
	r8 = r2->audibleVolume;
	if( !(r6 < r8) ) goto label$658e279_25_47;
	r5 = 1;
	return r5;
	label$658e279_25_47:
	r5 = -1;
	return r5;
	label$658e279_25_49:
	r5 = r1->id;
	r9 = r2->id;
	if( r5 >= r9 ) goto label$658e279_25_54;
	r5 = 1;
	return r5;
	label$658e279_25_54:
	r5 = -1;
	return r5;
}

int hxd_snd_Manager_sortEffect(hxd__snd__Manager r0,hxd__snd__Effect r1,hxd__snd__Effect r2) {
	int r3, r4;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->priority;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->priority;
	r3 = r3 - r4;
	return r3;
}

void hxd_snd_Manager_releaseChannel(hxd__snd__Manager r0,hxd__snd__Channel r1) {
	vvirtual *r14;
	hl__types__ArrayObj r9;
	hxd__snd__Manager r3;
	hxd__snd__Effect r11;
	hxd__res__Sound r15;
	hxd__snd__Source r13;
	hxd__snd__Channel r4, r6, r7;
	vdynamic *r5;
	varray *r12;
	int r8, r10;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->manager;
	if( r3 ) goto label$658e279_27_4;
	return;
	label$658e279_27_4:
	r4 = r0->channels;
	if( r4 != r1 ) goto label$658e279_27_9;
	r4 = r1->next;
	r0->channels = r4;
	goto label$658e279_27_20;
	label$658e279_27_9:
	r4 = r0->channels;
	label$658e279_27_10:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->next;
	if( r6 == r1 ) goto label$658e279_27_17;
	r6 = r4->next;
	r4 = r6;
	goto label$658e279_27_10;
	label$658e279_27_17:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->next;
	r4->next = r7;
	label$658e279_27_20:
	r8 = 0;
	r9 = r1->effects;
	label$658e279_27_22:
	if( r9 == NULL ) hl_null_access();
	r10 = r9->length;
	if( r8 >= r10 ) goto label$658e279_27_37;
	r10 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$658e279_27_30;
	r11 = NULL;
	goto label$658e279_27_33;
	label$658e279_27_30:
	r12 = r9->array;
	r5 = ((vdynamic**)(r12 + 1))[r8];
	r11 = (hxd__snd__Effect)r5;
	label$658e279_27_33:
	++r8;
	if( r1 == NULL ) hl_null_access();
	hxd_snd_ChannelBase_removeEffect(((hxd__snd__ChannelBase)r1),r11);
	goto label$658e279_27_22;
	label$658e279_27_37:
	if( r1 == NULL ) hl_null_access();
	r13 = r1->source;
	if( !r13 ) goto label$658e279_27_42;
	r13 = r1->source;
	hxd_snd_Manager_releaseSource(r0,r13);
	label$658e279_27_42:
	r6 = NULL;
	r1->next = r6;
	r3 = NULL;
	r1->manager = r3;
	r9 = NULL;
	r1->effects = r9;
	r9 = NULL;
	r1->bindedEffects = r9;
	r14 = NULL;
	r1->currentFade = r14;
	r15 = r1->sound;
	if( !r15 ) goto label$658e279_27_59;
	if( r15 == NULL ) hl_null_access();
	r4 = r15->channel;
	if( r4 != r1 ) goto label$658e279_27_59;
	r4 = NULL;
	r15->channel = r4;
	label$658e279_27_59:
	return;
}

void hxd_snd_Manager_new(hxd__snd__Manager r0) {
	String r12;
	$String r9;
	hl__types__ArrayObj r16;
	haxe__ds__StringMap r15;
	vvirtual *r6;
	hl_type *r18;
	venum *r10;
	haxe__io__Bytes r24;
	bool r1;
	hxd__snd__Listener r14;
	hxd__snd__Source r23;
	hxd__snd__$Manager r21;
	hxd__snd__SoundGroup r11;
	double r2;
	haxe__Exception r8;
	hxd__snd__openal__Driver r5;
	vdynamic *r3, *r7;
	int r19, r20, r22;
	varray *r17;
	hxd__snd__ChannelGroup r13;
	hl_trap_ctx trap$0;
	r1 = false;
	r0->suspended = r1;
	r2 = 0.;
	r0->timeOffset = r2;
	hl_trap(trap$0,r3,label$658e279_28_17);
	r5 = (hxd__snd__openal__Driver)hl_alloc_obj(&t$hxd_snd_openal_Driver);
	hxd_snd_openal_Driver_new(r5);
	if( r5 ) goto label$658e279_28_10;
	r6 = NULL;
	goto label$658e279_28_14;
	label$658e279_28_10:
	r6 = r5->f$4;
	if( r6 ) goto label$658e279_28_14;
	r6 = hl_to_virtual(&t$vrt_51912fa,(vdynamic*)r5);
	r5->f$4 = r6;
	label$658e279_28_14:
	r0->driver = r6;
	hl_endtrap(trap$0);
	goto label$658e279_28_27;
	label$658e279_28_17:
	r8 = haxe_Exception_caught(r3);
	if( r8 == NULL ) hl_null_access();
	r7 = ((vdynamic* (*)(haxe__Exception))r8->$type->vobj_proto[0])(r8);
	r9 = ($String)g$_String;
	r1 = Std_isOfType(r7,((vdynamic*)r9));
	if( !r1 ) goto label$658e279_28_26;
	r6 = NULL;
	r0->driver = r6;
	goto label$658e279_28_27;
	label$658e279_28_26:
	hl_rethrow((vdynamic*)r3);
	label$658e279_28_27:
	r2 = 1.;
	r0->masterVolume = r2;
	r6 = r0->driver;
	if( r6 ) goto label$658e279_28_33;
	r1 = true;
	goto label$658e279_28_37;
	label$658e279_28_33:
	r6 = r0->driver;
	if( r6 == NULL ) hl_null_access();
	r10 = (venum*)g$4891d77;
	if( hl_vfields(r6)[9] ) r1 = ((bool (*)(vdynamic*,venum*))hl_vfields(r6)[9])(r6->value,r10); else {
		void *args[] = {r10};
		vdynamic ret;
		hl_dyn_call_obj(r6->value,&t$fun_917e45c,-449783438/*hasFeature*/,args,&ret);
		r1 = (bool)ret.v.i;
	}
	label$658e279_28_37:
	r0->hasMasterVolume = r1;
	r11 = (hxd__snd__SoundGroup)hl_alloc_obj(&t$hxd_snd_SoundGroup);
	r12 = (String)s$master;
	hxd_snd_SoundGroup_new(r11,r12);
	r0->masterSoundGroup = r11;
	r13 = (hxd__snd__ChannelGroup)hl_alloc_obj(&t$hxd_snd_ChannelGroup);
	r12 = (String)s$master;
	hxd_snd_ChannelGroup_new(r13,r12);
	r0->masterChannelGroup = r13;
	r14 = (hxd__snd__Listener)hl_alloc_obj(&t$hxd_snd_Listener);
	hxd_snd_Listener_new(r14);
	r0->listener = r14;
	r15 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r15);
	r0->soundBufferMap = r15;
	r18 = &t$String;
	r19 = 0;
	r17 = hl_alloc_array(r18,r19);
	r16 = hl_types_ArrayObj_alloc(r17);
	r0->soundBufferKeys = r16;
	r18 = &t$hxd_snd_Buffer;
	r19 = 0;
	r17 = hl_alloc_array(r18,r19);
	r16 = hl_types_ArrayObj_alloc(r17);
	r0->freeStreamBuffers = r16;
	r18 = &t$hxd_snd_Effect;
	r19 = 0;
	r17 = hl_alloc_array(r18,r19);
	r16 = hl_types_ArrayObj_alloc(r17);
	r0->effectGC = r16;
	r19 = 0;
	r0->soundBufferCount = r19;
	r6 = r0->driver;
	if( !r6 ) goto label$658e279_28_89;
	r18 = &t$hxd_snd_Source;
	r19 = 0;
	r17 = hl_alloc_array(r18,r19);
	r16 = hl_types_ArrayObj_alloc(r17);
	r0->sources = r16;
	r19 = 0;
	r21 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r20 = r21->MAX_SOURCES;
	label$658e279_28_79:
	if( r19 >= r20 ) goto label$658e279_28_89;
	++r19;
	r16 = r0->sources;
	if( r16 == NULL ) hl_null_access();
	r23 = (hxd__snd__Source)hl_alloc_obj(&t$hxd_snd_Source);
	r6 = r0->driver;
	hxd_snd_Source_new(r23,r6);
	r22 = hl_types_ArrayObj_push(r16,((vdynamic*)r23));
	goto label$658e279_28_79;
	label$658e279_28_89:
	r19 = 24;
	r24 = haxe_io_Bytes_alloc(r19);
	r0->cachedBytes = r24;
	r21 = (hxd__snd__$Manager)g$_hxd_snd_Manager;
	r19 = r21->STREAM_BUFFER_SAMPLE_COUNT;
	r20 = 2;
	r19 = r19 * r20;
	r24 = haxe_io_Bytes_alloc(r19);
	r0->resampleBytes = r24;
	return;
}

