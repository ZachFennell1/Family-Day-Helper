// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h3d/col/ObjectCollider.h>
extern h3d__col__$ObjectCollider g$_h3d_col_ObjectCollider;
h3d__Matrix h3d_scene_Object_getInvPos(h3d__scene__Object);
void h3d_col_Ray_normalize(h3d__col__Ray);
extern hl_type t$fun_258ac7d;
#include <hl/natives.h>
extern hl_type t$fun_c0189e8;
h3d__Matrix h3d_scene_Object_getAbsPos(h3d__scene__Object);
extern hl_type t$fun_b7b1fe3;
#include <h3d/Vector.h>
extern hl_type t$h3d_Vector;
void h3d_Vector_new(h3d__Vector,double*,double*,double*,double*);
double Math_max(double,double);
extern hl_type t$fun_32a6249;

void h3d_col_ObjectCollider_new(h3d__col__ObjectCollider r0,h3d__scene__Object r1,vvirtual* r2) {
	r0->obj = r1;
	r0->collider = r2;
	return;
}

double h3d_col_ObjectCollider_rayIntersection(h3d__col__ObjectCollider r0,h3d__col__Ray r1,bool r2) {
	vvirtual *r22;
	h3d__col__$ObjectCollider r4;
	h3d__col__Ray r3, r6;
	double r7, r10, r11, r12, r13, r14, r15, r16, r17, r18, r19, r20, r21;
	h3d__scene__Object r9;
	h3d__Matrix r8;
	r4 = (h3d__col__$ObjectCollider)g$_h3d_col_ObjectCollider;
	r3 = r4->TMP_RAY;
	r6 = NULL;
	r4 = (h3d__col__$ObjectCollider)g$_h3d_col_ObjectCollider;
	r4->TMP_RAY = r6;
	if( r3 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r7 = r1->px;
	r3->px = r7;
	r7 = r1->py;
	r3->py = r7;
	r7 = r1->pz;
	r3->pz = r7;
	r7 = r1->lx;
	r3->lx = r7;
	r7 = r1->ly;
	r3->ly = r7;
	r7 = r1->lz;
	r3->lz = r7;
	r9 = r0->obj;
	if( r9 == NULL ) hl_null_access();
	r8 = h3d_scene_Object_getInvPos(r9);
	r7 = r1->px;
	r10 = r1->py;
	r11 = r1->pz;
	r12 = 1.;
	if( r8 == NULL ) hl_null_access();
	r14 = r8->_11;
	r13 = r7 * r14;
	r15 = r8->_21;
	r14 = r10 * r15;
	r13 = r13 + r14;
	r15 = r8->_31;
	r14 = r11 * r15;
	r13 = r13 + r14;
	r15 = r8->_41;
	r14 = r12 * r15;
	r13 = r13 + r14;
	r15 = r8->_12;
	r14 = r7 * r15;
	r16 = r8->_22;
	r15 = r10 * r16;
	r14 = r14 + r15;
	r16 = r8->_32;
	r15 = r11 * r16;
	r14 = r14 + r15;
	r16 = r8->_42;
	r15 = r12 * r16;
	r14 = r14 + r15;
	r16 = r8->_13;
	r15 = r7 * r16;
	r17 = r8->_23;
	r16 = r10 * r17;
	r15 = r15 + r16;
	r17 = r8->_33;
	r16 = r11 * r17;
	r15 = r15 + r16;
	r17 = r8->_43;
	r16 = r12 * r17;
	r15 = r15 + r16;
	r1->px = r13;
	r1->py = r14;
	r1->pz = r15;
	r13 = r1->lx;
	r14 = r1->ly;
	r15 = r1->lz;
	r16 = 1.;
	r18 = r8->_11;
	r17 = r13 * r18;
	r19 = r8->_21;
	r18 = r14 * r19;
	r17 = r17 + r18;
	r19 = r8->_31;
	r18 = r15 * r19;
	r17 = r17 + r18;
	r19 = r8->_12;
	r18 = r13 * r19;
	r20 = r8->_22;
	r19 = r14 * r20;
	r18 = r18 + r19;
	r20 = r8->_32;
	r19 = r15 * r20;
	r18 = r18 + r19;
	r20 = r8->_13;
	r19 = r13 * r20;
	r21 = r8->_23;
	r20 = r14 * r21;
	r19 = r19 + r20;
	r21 = r8->_33;
	r20 = r15 * r21;
	r19 = r19 + r20;
	r1->lx = r17;
	r1->ly = r18;
	r1->lz = r19;
	h3d_col_Ray_normalize(r1);
	r22 = r0->collider;
	if( r22 == NULL ) hl_null_access();
	if( hl_vfields(r22)[0] ) r7 = ((double (*)(vdynamic*,h3d__col__Ray,bool))hl_vfields(r22)[0])(r22->value,r1,r2); else {
		void *args[] = {r1,&r2};
		vdynamic ret;
		hl_dyn_call_obj(r22->value,&t$fun_258ac7d,69795042/*rayIntersection*/,args,&ret);
		r7 = (double)ret.v.d;
	}
	r11 = 0.;
	if( !(r7 < r11) ) goto label$1c8ac46_2_115;
	r10 = r3->px;
	r1->px = r10;
	r10 = r3->py;
	r1->py = r10;
	r10 = r3->pz;
	r1->pz = r10;
	r10 = r3->lx;
	r1->lx = r10;
	r10 = r3->ly;
	r1->ly = r10;
	r10 = r3->lz;
	r1->lz = r10;
	r4 = (h3d__col__$ObjectCollider)g$_h3d_col_ObjectCollider;
	r4->TMP_RAY = r3;
	return r7;
	label$1c8ac46_2_115:
	r10 = r1->px;
	r12 = r1->lx;
	r11 = r7 * r12;
	r10 = r10 + r11;
	r11 = r1->py;
	r13 = r1->ly;
	r12 = r7 * r13;
	r11 = r11 + r12;
	r12 = r1->pz;
	r14 = r1->lz;
	r13 = r7 * r14;
	r12 = r12 + r13;
	r9 = r0->obj;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->absPos;
	if( r8 == NULL ) hl_null_access();
	r14 = r8->_11;
	r13 = r10 * r14;
	r15 = r8->_21;
	r14 = r11 * r15;
	r13 = r13 + r14;
	r15 = r8->_31;
	r14 = r12 * r15;
	r13 = r13 + r14;
	r14 = r8->_41;
	r13 = r13 + r14;
	r15 = r8->_12;
	r14 = r10 * r15;
	r16 = r8->_22;
	r15 = r11 * r16;
	r14 = r14 + r15;
	r16 = r8->_32;
	r15 = r12 * r16;
	r14 = r14 + r15;
	r15 = r8->_42;
	r14 = r14 + r15;
	r16 = r8->_13;
	r15 = r10 * r16;
	r17 = r8->_23;
	r16 = r11 * r17;
	r15 = r15 + r16;
	r17 = r8->_33;
	r16 = r12 * r17;
	r15 = r15 + r16;
	r16 = r8->_43;
	r15 = r15 + r16;
	r10 = r13;
	r11 = r14;
	r12 = r15;
	r13 = r3->px;
	r1->px = r13;
	r13 = r3->py;
	r1->py = r13;
	r13 = r3->pz;
	r1->pz = r13;
	r13 = r3->lx;
	r1->lx = r13;
	r13 = r3->ly;
	r1->ly = r13;
	r13 = r3->lz;
	r1->lz = r13;
	r4 = (h3d__col__$ObjectCollider)g$_h3d_col_ObjectCollider;
	r4->TMP_RAY = r3;
	r14 = r1->px;
	r13 = r10 - r14;
	r15 = r1->py;
	r14 = r11 - r15;
	r16 = r1->pz;
	r15 = r12 - r16;
	r16 = r13 * r13;
	r17 = r14 * r14;
	r16 = r16 + r17;
	r17 = r15 * r15;
	r16 = r16 + r17;
	r16 = hl_math_sqrt(r16);
	return r16;
}

bool h3d_col_ObjectCollider_contains(h3d__col__ObjectCollider r0,h3d__col__Point r1) {
	vvirtual *r13;
	bool r12;
	double r2, r3, r4, r7, r8, r9, r10, r11;
	h3d__scene__Object r6;
	h3d__Matrix r5;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->x;
	r3 = r1->y;
	r4 = r1->z;
	r6 = r0->obj;
	if( r6 == NULL ) hl_null_access();
	r5 = h3d_scene_Object_getInvPos(r6);
	r7 = r1->x;
	if( r5 == NULL ) hl_null_access();
	r8 = r5->_11;
	r7 = r7 * r8;
	r8 = r1->y;
	r9 = r5->_21;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r8 = r1->z;
	r9 = r5->_31;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r8 = r5->_41;
	r7 = r7 + r8;
	r8 = r1->x;
	r9 = r5->_12;
	r8 = r8 * r9;
	r9 = r1->y;
	r10 = r5->_22;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r9 = r1->z;
	r10 = r5->_32;
	r9 = r9 * r10;
	r8 = r8 + r9;
	r9 = r5->_42;
	r8 = r8 + r9;
	r9 = r1->x;
	r10 = r5->_13;
	r9 = r9 * r10;
	r10 = r1->y;
	r11 = r5->_23;
	r10 = r10 * r11;
	r9 = r9 + r10;
	r10 = r1->z;
	r11 = r5->_33;
	r10 = r10 * r11;
	r9 = r9 + r10;
	r10 = r5->_43;
	r9 = r9 + r10;
	r1->x = r7;
	r1->y = r8;
	r1->z = r9;
	r13 = r0->collider;
	if( r13 == NULL ) hl_null_access();
	if( hl_vfields(r13)[3] ) r12 = ((bool (*)(vdynamic*,h3d__col__Point))hl_vfields(r13)[3])(r13->value,r1); else {
		void *args[] = {r1};
		vdynamic ret;
		hl_dyn_call_obj(r13->value,&t$fun_c0189e8,209410724/*contains*/,args,&ret);
		r12 = (bool)ret.v.i;
	}
	r1->x = r2;
	r1->y = r3;
	r1->z = r4;
	return r12;
}

bool h3d_col_ObjectCollider_inFrustum(h3d__col__ObjectCollider r0,h3d__col__Frustum r1,h3d__Matrix r2) {
	vvirtual *r5;
	bool r4;
	h3d__col__$ObjectCollider r7;
	double r9, r10, r11, r12, r13, r14, r15, r16, r17, r18, r19, r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31, r32, r33, r34;
	h3d__scene__Object r6;
	h3d__Matrix r3, r8;
	if( r2 ) goto label$1c8ac46_4_8;
	r5 = r0->collider;
	if( r5 == NULL ) hl_null_access();
	r6 = r0->obj;
	if( r6 == NULL ) hl_null_access();
	r3 = h3d_scene_Object_getAbsPos(r6);
	if( hl_vfields(r5)[2] ) r4 = ((bool (*)(vdynamic*,h3d__col__Frustum,h3d__Matrix))hl_vfields(r5)[2])(r5->value,r1,r3); else {
		void *args[] = {r1,r3};
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_b7b1fe3,-159610637/*inFrustum*/,args,&ret);
		r4 = (bool)ret.v.i;
	}
	return r4;
	label$1c8ac46_4_8:
	r7 = (h3d__col__$ObjectCollider)g$_h3d_col_ObjectCollider;
	r3 = r7->TMP_MAT;
	r6 = r0->obj;
	if( r6 == NULL ) hl_null_access();
	r8 = h3d_scene_Object_getAbsPos(r6);
	if( r2 == NULL ) hl_null_access();
	r9 = r2->_11;
	r10 = r2->_12;
	r11 = r2->_13;
	r12 = r2->_21;
	r13 = r2->_22;
	r14 = r2->_23;
	r15 = r2->_31;
	r16 = r2->_32;
	r17 = r2->_33;
	r18 = r2->_41;
	r19 = r2->_42;
	r20 = r2->_43;
	if( r8 == NULL ) hl_null_access();
	r21 = r8->_11;
	r22 = r8->_12;
	r23 = r8->_13;
	r24 = r8->_21;
	r25 = r8->_22;
	r26 = r8->_23;
	r27 = r8->_31;
	r28 = r8->_32;
	r29 = r8->_33;
	r30 = r8->_41;
	r31 = r8->_42;
	r32 = r8->_43;
	if( r3 == NULL ) hl_null_access();
	r33 = r9 * r21;
	r34 = r10 * r24;
	r33 = r33 + r34;
	r34 = r11 * r27;
	r33 = r33 + r34;
	r3->_11 = r33;
	r33 = r9 * r22;
	r34 = r10 * r25;
	r33 = r33 + r34;
	r34 = r11 * r28;
	r33 = r33 + r34;
	r3->_12 = r33;
	r33 = r9 * r23;
	r34 = r10 * r26;
	r33 = r33 + r34;
	r34 = r11 * r29;
	r33 = r33 + r34;
	r3->_13 = r33;
	r33 = 0.;
	r3->_14 = r33;
	r33 = r12 * r21;
	r34 = r13 * r24;
	r33 = r33 + r34;
	r34 = r14 * r27;
	r33 = r33 + r34;
	r3->_21 = r33;
	r33 = r12 * r22;
	r34 = r13 * r25;
	r33 = r33 + r34;
	r34 = r14 * r28;
	r33 = r33 + r34;
	r3->_22 = r33;
	r33 = r12 * r23;
	r34 = r13 * r26;
	r33 = r33 + r34;
	r34 = r14 * r29;
	r33 = r33 + r34;
	r3->_23 = r33;
	r33 = 0.;
	r3->_24 = r33;
	r33 = r15 * r21;
	r34 = r16 * r24;
	r33 = r33 + r34;
	r34 = r17 * r27;
	r33 = r33 + r34;
	r3->_31 = r33;
	r33 = r15 * r22;
	r34 = r16 * r25;
	r33 = r33 + r34;
	r34 = r17 * r28;
	r33 = r33 + r34;
	r3->_32 = r33;
	r33 = r15 * r23;
	r34 = r16 * r26;
	r33 = r33 + r34;
	r34 = r17 * r29;
	r33 = r33 + r34;
	r3->_33 = r33;
	r33 = 0.;
	r3->_34 = r33;
	r33 = r18 * r21;
	r34 = r19 * r24;
	r33 = r33 + r34;
	r34 = r20 * r27;
	r33 = r33 + r34;
	r33 = r33 + r30;
	r3->_41 = r33;
	r33 = r18 * r22;
	r34 = r19 * r25;
	r33 = r33 + r34;
	r34 = r20 * r28;
	r33 = r33 + r34;
	r33 = r33 + r31;
	r3->_42 = r33;
	r33 = r18 * r23;
	r34 = r19 * r26;
	r33 = r33 + r34;
	r34 = r20 * r29;
	r33 = r33 + r34;
	r33 = r33 + r32;
	r3->_43 = r33;
	r33 = 1.;
	r3->_44 = r33;
	r5 = r0->collider;
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[2] ) r4 = ((bool (*)(vdynamic*,h3d__col__Frustum,h3d__Matrix))hl_vfields(r5)[2])(r5->value,r1,r3); else {
		void *args[] = {r1,r3};
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_b7b1fe3,-159610637/*inFrustum*/,args,&ret);
		r4 = (bool)ret.v.i;
	}
	return r4;
}

bool h3d_col_ObjectCollider_inSphere(h3d__col__ObjectCollider r0,h3d__col__Sphere r1) {
	vvirtual *r24;
	bool r23;
	h3d__Vector r17, r18;
	double r5, r6, r7, r8, r9, r10, r11, r12, r13, r14, r15, r16;
	double *r19, *r20, *r21, *r22;
	h3d__scene__Object r3;
	h3d__Matrix r2;
	r3 = r0->obj;
	if( r3 == NULL ) hl_null_access();
	r2 = h3d_scene_Object_getInvPos(r3);
	if( r1 == NULL ) hl_null_access();
	r5 = r1->x;
	r6 = r1->y;
	r7 = r1->z;
	r8 = r1->r;
	r9 = r1->x;
	r10 = r1->y;
	r11 = r1->z;
	if( r2 == NULL ) hl_null_access();
	r13 = r2->_11;
	r12 = r9 * r13;
	r14 = r2->_21;
	r13 = r10 * r14;
	r12 = r12 + r13;
	r14 = r2->_31;
	r13 = r11 * r14;
	r12 = r12 + r13;
	r13 = r2->_41;
	r12 = r12 + r13;
	r14 = r2->_12;
	r13 = r9 * r14;
	r15 = r2->_22;
	r14 = r10 * r15;
	r13 = r13 + r14;
	r15 = r2->_32;
	r14 = r11 * r15;
	r13 = r13 + r14;
	r14 = r2->_42;
	r13 = r13 + r14;
	r15 = r2->_13;
	r14 = r9 * r15;
	r16 = r2->_23;
	r15 = r10 * r16;
	r14 = r14 + r15;
	r16 = r2->_33;
	r15 = r11 * r16;
	r14 = r14 + r15;
	r15 = r2->_43;
	r14 = r14 + r15;
	r9 = r12;
	r10 = r13;
	r11 = r14;
	r17 = NULL;
	if( r17 ) goto label$1c8ac46_5_54;
	r18 = (h3d__Vector)hl_alloc_obj(&t$h3d_Vector);
	r19 = NULL;
	r20 = NULL;
	r21 = NULL;
	r22 = NULL;
	h3d_Vector_new(r18,r19,r20,r21,r22);
	r17 = r18;
	label$1c8ac46_5_54:
	if( r17 == NULL ) hl_null_access();
	r12 = r2->_11;
	r13 = r2->_11;
	r12 = r12 * r13;
	r13 = r2->_12;
	r14 = r2->_12;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r13 = r2->_13;
	r14 = r2->_13;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r12 = hl_math_sqrt(r12);
	r17->x = r12;
	r12 = r2->_21;
	r13 = r2->_21;
	r12 = r12 * r13;
	r13 = r2->_22;
	r14 = r2->_22;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r13 = r2->_23;
	r14 = r2->_23;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r12 = hl_math_sqrt(r12);
	r17->y = r12;
	r12 = r2->_31;
	r13 = r2->_31;
	r12 = r12 * r13;
	r13 = r2->_32;
	r14 = r2->_32;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r13 = r2->_33;
	r14 = r2->_33;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r12 = hl_math_sqrt(r12);
	r17->z = r12;
	r12 = r2->_11;
	r13 = r2->_22;
	r14 = r2->_33;
	r13 = r13 * r14;
	r14 = r2->_23;
	r15 = r2->_32;
	r14 = r14 * r15;
	r13 = r13 - r14;
	r12 = r12 * r13;
	r13 = r2->_12;
	r14 = r2->_23;
	r15 = r2->_31;
	r14 = r14 * r15;
	r15 = r2->_21;
	r16 = r2->_33;
	r15 = r15 * r16;
	r14 = r14 - r15;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r13 = r2->_13;
	r14 = r2->_21;
	r15 = r2->_32;
	r14 = r14 * r15;
	r15 = r2->_22;
	r16 = r2->_31;
	r15 = r15 * r16;
	r14 = r14 - r15;
	r13 = r13 * r14;
	r12 = r12 + r13;
	r13 = 0.;
	if( !(r12 < r13) ) goto label$1c8ac46_5_137;
	r12 = r17->x;
	r13 = -1.;
	r12 = r12 * r13;
	r17->x = r12;
	r12 = r17->y;
	r13 = -1.;
	r12 = r12 * r13;
	r17->y = r12;
	r12 = r17->z;
	r13 = -1.;
	r12 = r12 * r13;
	r17->z = r12;
	label$1c8ac46_5_137:
	r1->x = r9;
	r1->y = r10;
	r1->z = r11;
	r12 = r1->r;
	r13 = r17->x;
	r14 = r17->y;
	r13 = Math_max(r13,r14);
	r14 = r17->z;
	r13 = Math_max(r13,r14);
	r12 = r12 * r13;
	r1->r = r12;
	r24 = r0->collider;
	if( r24 == NULL ) hl_null_access();
	if( hl_vfields(r24)[1] ) r23 = ((bool (*)(vdynamic*,h3d__col__Sphere))hl_vfields(r24)[1])(r24->value,r1); else {
		void *args[] = {r1};
		vdynamic ret;
		hl_dyn_call_obj(r24->value,&t$fun_32a6249,91552220/*inSphere*/,args,&ret);
		r23 = (bool)ret.v.i;
	}
	r1->x = r5;
	r1->y = r6;
	r1->z = r7;
	r1->r = r8;
	return r23;
}

