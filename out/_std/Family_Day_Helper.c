// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <_std/Family_Day_Helper.h>
#include <h2d/Font.h>
#include <h2d/Align.h>
void hxd_App_init(hxd__App);
hxd__Window hxd_Window_getInstance(void);
extern String s$Family_Time_Countdown;
String hxd_Window_set_title(hxd__Window,String);
int hxd_Window_get_width(hxd__Window);
int hxd_Window_get_height(hxd__Window);
h2d__Font hxd_res_DefaultFont_get(void);
extern hl_type t$h2d_Text;
#include <h2d/Object.h>
void h2d_Text_new(h2d__Text,h2d__Font,h2d__Object);
extern venum* g$h2d_Align_Center;
venum* h2d_Text_set_textAlign(h2d__Text,venum*);
void Family_Day_Helper_make_clock(Family_Day_Helper);
#include <hl/types/ArrayObj.h>
#include <_std/Date.h>
Date Date_now(void);
String Date_toString(Date);
extern String s$7215ee9;
hl__types__ArrayObj String_split(String,String);
extern String s$336d5eb;
String h2d_Text_set_text(h2d__Text,String);
extern String s$6666cd7;
String String___add__(String,String);
void Family_Day_Helper_get_family_warn(Family_Day_Helper);
int Date_getDay(Date);
extern String s$853ae90;
vdynamic* Std_parseInt(String);
extern String s$MINUTES_REMAINING_;
extern hl_type t$_i32;
String Std_string(vdynamic*);
void hxd_App_update(hxd__App,double);
extern hl_type t$Family_Day_Helper;
void Family_Day_Helper_new(Family_Day_Helper);
void hxd_App_new(hxd__App);

void Family_Day_Helper_init(Family_Day_Helper r0) {
	String r3;
	venum *r11;
	bool r8;
	h2d__Text r6;
	h2d__Font r5;
	hxd__Window r2;
	double r9, r10;
	h2d__Scene r7;
	int r4;
	hxd_App_init(((hxd__App)r0));
	r2 = hxd_Window_getInstance();
	r0->stage = r2;
	r2 = r0->stage;
	if( r2 == NULL ) hl_null_access();
	r3 = (String)s$Family_Time_Countdown;
	r3 = hxd_Window_set_title(r2,r3);
	r2 = r0->stage;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_Window_get_width(r2);
	r0->w = r4;
	r2 = r0->stage;
	if( r2 == NULL ) hl_null_access();
	r4 = hxd_Window_get_height(r2);
	r0->h = r4;
	r5 = hxd_res_DefaultFont_get();
	r6 = (h2d__Text)hl_alloc_obj(&t$h2d_Text);
	r7 = r0->s2d;
	h2d_Text_new(r6,r5,((h2d__Object)r7));
	r0->time_Display = r6;
	r6 = r0->time_Display;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleX = r9;
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleY = r9;
	r6 = r0->time_Display;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->w;
	r9 = (double)r4;
	r10 = 2.;
	r9 = r9 / r10;
	r6->x = r9;
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->h;
	r9 = (double)r4;
	r10 = 1.5;
	r9 = r9 / r10;
	r6->y = r9;
	r6 = r0->time_Display;
	if( r6 == NULL ) hl_null_access();
	r11 = (venum*)g$h2d_Align_Center;
	r11 = h2d_Text_set_textAlign(r6,r11);
	r6 = (h2d__Text)hl_alloc_obj(&t$h2d_Text);
	r7 = r0->s2d;
	h2d_Text_new(r6,r5,((h2d__Object)r7));
	r0->family_Warn = r6;
	r6 = r0->family_Warn;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleX = r9;
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleY = r9;
	r6 = r0->family_Warn;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->w;
	r9 = (double)r4;
	r10 = 2.;
	r9 = r9 / r10;
	r6->x = r9;
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->h;
	r9 = (double)r4;
	r10 = 3.;
	r9 = r9 / r10;
	r6->y = r9;
	r6 = r0->family_Warn;
	if( r6 == NULL ) hl_null_access();
	r11 = (venum*)g$h2d_Align_Center;
	r11 = h2d_Text_set_textAlign(r6,r11);
	r6 = (h2d__Text)hl_alloc_obj(&t$h2d_Text);
	r7 = r0->s2d;
	h2d_Text_new(r6,r5,((h2d__Object)r7));
	r0->date_Display = r6;
	r6 = r0->date_Display;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleX = r9;
	r8 = true;
	r6->posChanged = r8;
	r9 = 5.;
	r6->scaleY = r9;
	r6 = r0->date_Display;
	if( r6 == NULL ) hl_null_access();
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->w;
	r9 = (double)r4;
	r10 = 2.;
	r9 = r9 / r10;
	r6->x = r9;
	r8 = true;
	r6->posChanged = r8;
	r4 = r0->h;
	r9 = (double)r4;
	r10 = 5.799999999999999822;
	r9 = r9 / r10;
	r6->y = r9;
	r6 = r0->date_Display;
	if( r6 == NULL ) hl_null_access();
	r11 = (venum*)g$h2d_Align_Center;
	r11 = h2d_Text_set_textAlign(r6,r11);
	Family_Day_Helper_make_clock(r0);
	return;
}

void Family_Day_Helper_make_clock(Family_Day_Helper r0) {
	String r2, r4;
	Date r3;
	hl__types__ArrayObj r1, r6;
	h2d__Text r11;
	vdynamic *r9;
	varray *r10;
	int r7, r8;
	r3 = Date_now();
	if( r3 == NULL ) hl_null_access();
	r2 = Date_toString(r3);
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$7215ee9;
	r1 = String_split(r2,r4);
	if( r1 == NULL ) hl_null_access();
	r7 = 0;
	r8 = r1->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$4f5135e_2_12;
	r2 = NULL;
	goto label$4f5135e_2_15;
	label$4f5135e_2_12:
	r10 = r1->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r2 = (String)r9;
	label$4f5135e_2_15:
	if( r2 == NULL ) hl_null_access();
	r4 = (String)s$336d5eb;
	r6 = String_split(r2,r4);
	if( r6 == NULL ) hl_null_access();
	r7 = 0;
	r8 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$4f5135e_2_24;
	r2 = NULL;
	goto label$4f5135e_2_27;
	label$4f5135e_2_24:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r2 = (String)r9;
	label$4f5135e_2_27:
	r0->year = r2;
	r7 = 1;
	r8 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$4f5135e_2_33;
	r2 = NULL;
	goto label$4f5135e_2_36;
	label$4f5135e_2_33:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r2 = (String)r9;
	label$4f5135e_2_36:
	r0->month = r2;
	r7 = 2;
	r8 = r6->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$4f5135e_2_42;
	r2 = NULL;
	goto label$4f5135e_2_45;
	label$4f5135e_2_42:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r2 = (String)r9;
	label$4f5135e_2_45:
	r0->day = r2;
	r7 = 1;
	r8 = r1->length;
	if( ((unsigned)r7) < ((unsigned)r8) ) goto label$4f5135e_2_51;
	r2 = NULL;
	goto label$4f5135e_2_54;
	label$4f5135e_2_51:
	r10 = r1->array;
	r9 = ((vdynamic**)(r10 + 1))[r7];
	r2 = (String)r9;
	label$4f5135e_2_54:
	r0->time = r2;
	r11 = r0->time_Display;
	if( r11 == NULL ) hl_null_access();
	r2 = r0->time;
	r2 = h2d_Text_set_text(r11,r2);
	r11 = r0->date_Display;
	if( r11 == NULL ) hl_null_access();
	r2 = r0->month;
	r4 = (String)s$6666cd7;
	r2 = String___add__(r2,r4);
	r4 = r0->day;
	r2 = String___add__(r2,r4);
	r4 = (String)s$6666cd7;
	r2 = String___add__(r2,r4);
	r4 = r0->year;
	r2 = String___add__(r2,r4);
	r2 = h2d_Text_set_text(r11,r2);
	Family_Day_Helper_get_family_warn(r0);
	return;
}

void Family_Day_Helper_get_family_warn(Family_Day_Helper r0) {
	String r7, r8, r14, r18;
	hl__types__ArrayObj r6;
	Date r2;
	h2d__Text r17;
	vdynamic *r10, *r13;
	varray *r11;
	int r1, r4, r5, r9, r12, r15, r16;
	r2 = Date_now();
	if( r2 == NULL ) hl_null_access();
	r1 = Date_getDay(r2);
	r5 = 24;
	r4 = r1 * r5;
	r5 = 60;
	r4 = r4 * r5;
	r7 = r0->time;
	if( r7 == NULL ) hl_null_access();
	r8 = (String)s$853ae90;
	r6 = String_split(r7,r8);
	if( r6 == NULL ) hl_null_access();
	r5 = 0;
	r9 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r9) ) goto label$4f5135e_3_17;
	r7 = NULL;
	goto label$4f5135e_3_20;
	label$4f5135e_3_17:
	r11 = r6->array;
	r10 = ((vdynamic**)(r11 + 1))[r5];
	r7 = (String)r10;
	label$4f5135e_3_20:
	r5 = 1;
	r9 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r9) ) goto label$4f5135e_3_25;
	r8 = NULL;
	goto label$4f5135e_3_28;
	label$4f5135e_3_25:
	r11 = r6->array;
	r10 = ((vdynamic**)(r11 + 1))[r5];
	r8 = (String)r10;
	label$4f5135e_3_28:
	r5 = 7200;
	r12 = 900;
	r9 = r5 + r12;
	r5 = r9;
	r12 = 6;
	if( r1 == r12 ) goto label$4f5135e_3_40;
	r12 = 5;
	if( r1 != r12 ) goto label$4f5135e_3_56;
	r13 = Std_parseInt(r7);
	r9 = r13 ? r13->v.i : 0;
	r12 = 15;
	if( r9 < r12 ) goto label$4f5135e_3_56;
	label$4f5135e_3_40:
	r13 = Std_parseInt(r7);
	r12 = r13 ? r13->v.i : 0;
	r15 = 1;
	r12 = r12 - r15;
	r15 = 60;
	r12 = r12 * r15;
	r9 = r4 + r12;
	r13 = Std_parseInt(r8);
	r12 = r13 ? r13->v.i : 0;
	r9 = r9 + r12;
	r4 = r9;
	r9 = 10080;
	r16 = r9 - r4;
	r15 = r5 + r16;
	r12 = r15;
	goto label$4f5135e_3_69;
	label$4f5135e_3_56:
	r13 = Std_parseInt(r7);
	r15 = r13 ? r13->v.i : 0;
	r16 = 1;
	r15 = r15 - r16;
	r16 = 60;
	r15 = r15 * r16;
	r9 = r4 + r15;
	r13 = Std_parseInt(r8);
	r15 = r13 ? r13->v.i : 0;
	r9 = r9 + r15;
	r4 = r9;
	r9 = r5 - r4;
	r12 = r9;
	label$4f5135e_3_69:
	r17 = r0->family_Warn;
	if( r17 == NULL ) hl_null_access();
	r14 = (String)s$MINUTES_REMAINING_;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r12;
	r18 = Std_string(r10);
	r14 = String___add__(r14,r18);
	r14 = h2d_Text_set_text(r17,r14);
	return;
}

void Family_Day_Helper_onResize(Family_Day_Helper r0) {
	bool r5;
	h2d__Text r3;
	hxd__Window r1;
	double r6, r7;
	int r2;
	r1 = hxd_Window_getInstance();
	r0->stage = r1;
	r1 = r0->stage;
	if( r1 == NULL ) hl_null_access();
	r2 = hxd_Window_get_width(r1);
	r0->w = r2;
	r1 = r0->stage;
	if( r1 == NULL ) hl_null_access();
	r2 = hxd_Window_get_height(r1);
	r0->h = r2;
	r3 = r0->time_Display;
	if( r3 == NULL ) hl_null_access();
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->w;
	r6 = (double)r2;
	r7 = 2.;
	r6 = r6 / r7;
	r3->x = r6;
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->h;
	r6 = (double)r2;
	r7 = 1.5;
	r6 = r6 / r7;
	r3->y = r6;
	r3 = r0->family_Warn;
	if( r3 == NULL ) hl_null_access();
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->w;
	r6 = (double)r2;
	r7 = 2.;
	r6 = r6 / r7;
	r3->x = r6;
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->h;
	r6 = (double)r2;
	r7 = 3.;
	r6 = r6 / r7;
	r3->y = r6;
	r3 = r0->date_Display;
	if( r3 == NULL ) hl_null_access();
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->w;
	r6 = (double)r2;
	r7 = 2.;
	r6 = r6 / r7;
	r3->x = r6;
	r5 = true;
	r3->posChanged = r5;
	r2 = r0->h;
	r6 = (double)r2;
	r7 = 6.;
	r6 = r6 / r7;
	r3->y = r6;
	return;
}

void Family_Day_Helper_update(Family_Day_Helper r0,double r1) {
	hxd_App_update(((hxd__App)r0),r1);
	Family_Day_Helper_make_clock(r0);
	return;
}

void Family_Day_Helper_main() {
	Family_Day_Helper r0;
	r0 = (Family_Day_Helper)hl_alloc_obj(&t$Family_Day_Helper);
	Family_Day_Helper_new(r0);
	return;
}

void Family_Day_Helper_new(Family_Day_Helper r0) {
	hxd_App_new(((hxd__App)r0));
	return;
}

