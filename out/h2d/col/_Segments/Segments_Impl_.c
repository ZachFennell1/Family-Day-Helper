// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/col/_Segments/Segments_Impl_.h>
extern hl_type t$hxd_impl_ArrayIterator_h2d_col_Segment;
void hxd_impl_ArrayIterator_h2d_col_Segment_new(hxd__impl__ArrayIterator_h2d_col_Segment,hl__types__ArrayObj);
#include <h2d/col/Segment.h>
extern String s$TODO;
vdynamic* haxe_Exception_thrown(vdynamic*);
extern hl_type t$h2d_col_Point;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
void h2d_col_Point_new(h2d__col__Point,double*,double*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

hl__types__ArrayObj h2d_col__Segments_Segments_Impl__get_segments(hl__types__ArrayObj r0) {
	return r0;
}

int h2d_col__Segments_Segments_Impl__get_length(hl__types__ArrayObj r0) {
	int r1;
	if( r0 == NULL ) hl_null_access();
	r1 = r0->length;
	return r1;
}

hxd__impl__ArrayIterator_h2d_col_Segment h2d_col__Segments_Segments_Impl__iterator(hl__types__ArrayObj r0) {
	hxd__impl__ArrayIterator_h2d_col_Segment r1;
	r1 = (hxd__impl__ArrayIterator_h2d_col_Segment)hl_alloc_obj(&t$hxd_impl_ArrayIterator_h2d_col_Segment);
	hxd_impl_ArrayIterator_h2d_col_Segment_new(r1,r0);
	return r1;
}

bool h2d_col__Segments_Segments_Impl__containsPoint(hl__types__ArrayObj r0,h2d__col__Point r1,bool r2) {
	String r14;
	hl__types__ArrayObj r5;
	bool r3;
	h2d__col__Segment r7;
	double r10, r11, r12, r13;
	vdynamic *r8;
	varray *r9;
	int r4, r6;
	if( !r2 ) goto label$f1e79be_4_34;
	r4 = 0;
	r5 = r0;
	label$f1e79be_4_3:
	if( r5 == NULL ) hl_null_access();
	r6 = r5->length;
	if( r4 >= r6 ) goto label$f1e79be_4_33;
	r6 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$f1e79be_4_11;
	r7 = NULL;
	goto label$f1e79be_4_14;
	label$f1e79be_4_11:
	r9 = r5->array;
	r8 = ((vdynamic**)(r9 + 1))[r4];
	r7 = (h2d__col__Segment)r8;
	label$f1e79be_4_14:
	++r4;
	if( r7 == NULL ) hl_null_access();
	r10 = r7->dx;
	if( r1 == NULL ) hl_null_access();
	r11 = r1->y;
	r12 = r7->y;
	r11 = r11 - r12;
	r10 = r10 * r11;
	r11 = r7->dy;
	r12 = r1->x;
	r13 = r7->x;
	r12 = r12 - r13;
	r11 = r11 * r12;
	r10 = r10 - r11;
	r11 = 0.;
	if( !(r10 < r11) ) goto label$f1e79be_4_32;
	r3 = false;
	return r3;
	label$f1e79be_4_32:
	goto label$f1e79be_4_3;
	label$f1e79be_4_33:
	goto label$f1e79be_4_37;
	label$f1e79be_4_34:
	r14 = (String)s$TODO;
	r8 = haxe_Exception_thrown(((vdynamic*)r14));
	hl_throw((vdynamic*)r8);
	label$f1e79be_4_37:
	r3 = true;
	return r3;
}

hl__types__ArrayObj h2d_col__Segments_Segments_Impl__toPolygon(hl__types__ArrayObj r0) {
	hl__types__ArrayObj r1, r6;
	hl_type *r3;
	h2d__col__Segment r9;
	h2d__col__Point r11;
	double r12, r14;
	double *r13, *r15;
	vdynamic *r10;
	int r4, r7, r8;
	varray *r2;
	r3 = &t$h2d_col_Point;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r4 = 0;
	r6 = r0;
	label$f1e79be_5_6:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r4 >= r8 ) goto label$f1e79be_5_28;
	r8 = r6->length;
	if( ((unsigned)r4) < ((unsigned)r8) ) goto label$f1e79be_5_14;
	r9 = NULL;
	goto label$f1e79be_5_17;
	label$f1e79be_5_14:
	r2 = r6->array;
	r10 = ((vdynamic**)(r2 + 1))[r4];
	r9 = (h2d__col__Segment)r10;
	label$f1e79be_5_17:
	++r4;
	if( r1 == NULL ) hl_null_access();
	r11 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	if( r9 == NULL ) hl_null_access();
	r12 = r9->x;
	r13 = &r12;
	r14 = r9->y;
	r15 = &r14;
	h2d_col_Point_new(r11,r13,r15);
	r7 = hl_types_ArrayObj_push(r1,((vdynamic*)r11));
	goto label$f1e79be_5_6;
	label$f1e79be_5_28:
	return r1;
}

h2d__col__Point h2d_col__Segments_Segments_Impl__project(hl__types__ArrayObj r0,h2d__col__Point r1) {
	hl__types__ArrayObj r6;
	h2d__col__Segment r4, r8;
	h2d__col__Point r12;
	double r2, r11, r13, r14, r15, r16, r17, r18, r19, r20, r21, r24, r25;
	double *r22, *r23;
	vdynamic *r9;
	varray *r10;
	int r5, r7;
	r2 = 1e+20;
	r4 = NULL;
	r5 = 0;
	r6 = r0;
	label$f1e79be_6_4:
	if( r6 == NULL ) hl_null_access();
	r7 = r6->length;
	if( r5 >= r7 ) goto label$f1e79be_6_75;
	r7 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r7) ) goto label$f1e79be_6_12;
	r8 = NULL;
	goto label$f1e79be_6_15;
	label$f1e79be_6_12:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r5];
	r8 = (h2d__col__Segment)r9;
	label$f1e79be_6_15:
	++r5;
	if( r1 == NULL ) hl_null_access();
	r11 = r1->x;
	if( r8 == NULL ) hl_null_access();
	r13 = r8->x;
	r11 = r11 - r13;
	r13 = r1->y;
	r14 = r8->y;
	r13 = r13 - r14;
	r15 = r8->dx;
	r14 = r11 * r15;
	r16 = r8->dy;
	r15 = r13 * r16;
	r14 = r14 + r15;
	r16 = 0.;
	if( !(r14 < r16) ) goto label$f1e79be_6_36;
	r16 = r11 * r11;
	r17 = r13 * r13;
	r16 = r16 + r17;
	r15 = r16;
	goto label$f1e79be_6_71;
	label$f1e79be_6_36:
	r17 = r8->lenSq;
	if( !(r17 < r14) ) goto label$f1e79be_6_53;
	r16 = r1->x;
	r17 = r8->x;
	r18 = r8->dx;
	r17 = r17 + r18;
	r16 = r16 - r17;
	r17 = r1->y;
	r18 = r8->y;
	r19 = r8->dy;
	r18 = r18 + r19;
	r17 = r17 - r18;
	r18 = r16 * r16;
	r19 = r17 * r17;
	r18 = r18 + r19;
	r15 = r18;
	goto label$f1e79be_6_71;
	label$f1e79be_6_53:
	r17 = r8->invLenSq;
	r16 = r14 * r17;
	r17 = r8->x;
	r19 = r8->dx;
	r18 = r16 * r19;
	r17 = r17 + r18;
	r18 = r1->x;
	r17 = r17 - r18;
	r18 = r8->y;
	r20 = r8->dy;
	r19 = r16 * r20;
	r18 = r18 + r19;
	r19 = r1->y;
	r18 = r18 - r19;
	r19 = r17 * r17;
	r20 = r18 * r18;
	r19 = r19 + r20;
	r15 = r19;
	label$f1e79be_6_71:
	if( !(r15 < r2) ) goto label$f1e79be_6_74;
	r2 = r15;
	r4 = r8;
	label$f1e79be_6_74:
	goto label$f1e79be_6_4;
	label$f1e79be_6_75:
	if( r1 == NULL ) hl_null_access();
	r11 = r1->x;
	if( r4 == NULL ) hl_null_access();
	r13 = r4->x;
	r11 = r11 - r13;
	r13 = r1->y;
	r14 = r4->y;
	r13 = r13 - r14;
	r15 = r4->dx;
	r14 = r11 * r15;
	r16 = r4->dy;
	r15 = r13 * r16;
	r14 = r14 + r15;
	r16 = 0.;
	if( !(r14 < r16) ) goto label$f1e79be_6_97;
	r12 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r15 = r4->x;
	r22 = &r15;
	r16 = r4->y;
	r23 = &r16;
	h2d_col_Point_new(r12,r22,r23);
	return r12;
	label$f1e79be_6_97:
	r18 = r4->lenSq;
	if( !(r18 < r14) ) goto label$f1e79be_6_110;
	r12 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r17 = r4->x;
	r18 = r4->dx;
	r17 = r17 + r18;
	r22 = &r17;
	r18 = r4->y;
	r19 = r4->dy;
	r18 = r18 + r19;
	r23 = &r18;
	h2d_col_Point_new(r12,r22,r23);
	return r12;
	label$f1e79be_6_110:
	r20 = r4->invLenSq;
	r19 = r14 * r20;
	r12 = (h2d__col__Point)hl_alloc_obj(&t$h2d_col_Point);
	r20 = r4->x;
	r24 = r4->dx;
	r21 = r19 * r24;
	r20 = r20 + r21;
	r22 = &r20;
	r21 = r4->y;
	r25 = r4->dy;
	r24 = r19 * r25;
	r21 = r21 + r24;
	r23 = &r21;
	h2d_col_Point_new(r12,r22,r23);
	return r12;
}

double h2d_col__Segments_Segments_Impl__distanceSq(hl__types__ArrayObj r0,h2d__col__Point r1) {
	hl__types__ArrayObj r4;
	h2d__col__Segment r6;
	double r2, r9, r10, r11, r12, r13, r14, r15, r16, r17;
	vdynamic *r7;
	varray *r8;
	int r3, r5;
	r2 = 1e+20;
	r3 = 0;
	r4 = r0;
	label$f1e79be_7_3:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$f1e79be_7_73;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$f1e79be_7_11;
	r6 = NULL;
	goto label$f1e79be_7_14;
	label$f1e79be_7_11:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r6 = (h2d__col__Segment)r7;
	label$f1e79be_7_14:
	++r3;
	if( r1 == NULL ) hl_null_access();
	r9 = r1->x;
	if( r6 == NULL ) hl_null_access();
	r10 = r6->x;
	r9 = r9 - r10;
	r10 = r1->y;
	r11 = r6->y;
	r10 = r10 - r11;
	r12 = r6->dx;
	r11 = r9 * r12;
	r13 = r6->dy;
	r12 = r10 * r13;
	r11 = r11 + r12;
	r13 = 0.;
	if( !(r11 < r13) ) goto label$f1e79be_7_35;
	r13 = r9 * r9;
	r14 = r10 * r10;
	r13 = r13 + r14;
	r12 = r13;
	goto label$f1e79be_7_70;
	label$f1e79be_7_35:
	r14 = r6->lenSq;
	if( !(r14 < r11) ) goto label$f1e79be_7_52;
	r13 = r1->x;
	r14 = r6->x;
	r15 = r6->dx;
	r14 = r14 + r15;
	r13 = r13 - r14;
	r14 = r1->y;
	r15 = r6->y;
	r16 = r6->dy;
	r15 = r15 + r16;
	r14 = r14 - r15;
	r15 = r13 * r13;
	r16 = r14 * r14;
	r15 = r15 + r16;
	r12 = r15;
	goto label$f1e79be_7_70;
	label$f1e79be_7_52:
	r14 = r6->invLenSq;
	r13 = r11 * r14;
	r14 = r6->x;
	r16 = r6->dx;
	r15 = r13 * r16;
	r14 = r14 + r15;
	r15 = r1->x;
	r14 = r14 - r15;
	r15 = r6->y;
	r17 = r6->dy;
	r16 = r13 * r17;
	r15 = r15 + r16;
	r16 = r1->y;
	r15 = r15 - r16;
	r16 = r14 * r14;
	r17 = r15 * r15;
	r16 = r16 + r17;
	r12 = r16;
	label$f1e79be_7_70:
	if( !(r12 < r2) ) goto label$f1e79be_7_72;
	r2 = r12;
	label$f1e79be_7_72:
	goto label$f1e79be_7_3;
	label$f1e79be_7_73:
	return r2;
}

double h2d_col__Segments_Segments_Impl__distance(hl__types__ArrayObj r0,h2d__col__Point r1) {
	double r2;
	r2 = h2d_col__Segments_Segments_Impl__distanceSq(r0,r1);
	r2 = hl_math_sqrt(r2);
	return r2;
}

