// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/col/_IPolygons/IPolygons_Impl_.h>
extern hl_type t$hl_types_ArrayObj;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$hxd_impl_ArrayIterator_h2d_col_IPolygon;
void hxd_impl_ArrayIterator_h2d_col_IPolygon_new(hxd__impl__ArrayIterator_h2d_col_IPolygon,hl__types__ArrayObj);
extern hl_type t$_dyn;
hl__types__ArrayObj h2d_col__IPolygon_IPolygon_Impl__toPolygon(hl__types__ArrayObj,double*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$h2d_col_IBounds;
void h2d_col_IBounds_new(h2d__col__IBounds);
h2d__col__IBounds h2d_col__IPolygon_IPolygon_Impl__getBounds(hl__types__ArrayObj,h2d__col__IBounds);
#include <hxd/clipper/Clipper.h>
#include <hxd/clipper/ResultKind.h>
#include <hxd/clipper/PolyType.h>
#include <hxd/clipper/PolyFillType.h>
extern hl_type t$hxd_clipper_Clipper;
void hxd_clipper_Clipper_new(hxd__clipper__Clipper);
extern venum* g$hxd_clipper_ResultKind_NoHoles;
extern venum* g$hxd_clipper_PolyType_Clip;
#include <hxd/clipper/_Clipper/ClipperBase.h>
bool hxd_clipper__Clipper_ClipperBase_addPolygons(hxd__clipper___Clipper__ClipperBase,hl__types__ArrayObj,venum*);
extern venum* g$hxd_clipper_ClipType_Union;
extern venum* g$hxd_clipper_PolyFillType_NonZero;
hl__types__ArrayObj hxd_clipper_Clipper_execute(hxd__clipper__Clipper,venum*,venum*,venum*);
extern venum* g$db9b2a3;
hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__clipperOp(hl__types__ArrayObj,hl__types__ArrayObj,venum*,bool);
extern venum* g$hxd_clipper_ClipType_Difference;
#include <hxd/clipper/ClipperOffset.h>
#include <hxd/clipper/JoinType.h>
#include <hxd/clipper/EndType.h>
extern hl_type t$hxd_clipper_ClipperOffset;
void hxd_clipper_ClipperOffset_new(hxd__clipper__ClipperOffset,double*,double*);
extern venum* g$hxd_clipper_JoinType_Square;
extern venum* g$hxd_clipper_EndType_ClosedPol;
void hxd_clipper_ClipperOffset_addPolygons(hxd__clipper__ClipperOffset,hl__types__ArrayObj,venum*,venum*);
extern venum* g$hxd_clipper_JoinType_Miter;
extern venum* g$hxd_clipper_JoinType_Round;
hl__types__ArrayObj hxd_clipper_ClipperOffset_execute(hxd__clipper__ClipperOffset,double);
extern venum* g$hxd_clipper_PolyType_Subject;
bool h2d_col__IPolygon_IPolygon_Impl__contains(hl__types__ArrayObj,h2d__col__Point,bool*);
hl__types__ArrayObj h2d_col__IPolygon_IPolygon_Impl__optimize(hl__types__ArrayObj,double);

int h2d_col__IPolygons_IPolygons_Impl__get_length(hl__types__ArrayObj r0) {
	int r1;
	if( r0 == NULL ) hl_null_access();
	r1 = r0->length;
	return r1;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__get_polygons(hl__types__ArrayObj r0) {
	return r0;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl___new(hl__types__ArrayObj r0) {
	hl__types__ArrayObj r1;
	hl_type *r3;
	int r4;
	varray *r2;
	if( r0 ) goto label$20e7612_3_6;
	r3 = &t$hl_types_ArrayObj;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	goto label$20e7612_3_7;
	label$20e7612_3_6:
	r1 = r0;
	label$20e7612_3_7:
	return r1;
}

hxd__impl__ArrayIterator_h2d_col_IPolygon h2d_col__IPolygons_IPolygons_Impl__iterator(hl__types__ArrayObj r0) {
	hxd__impl__ArrayIterator_h2d_col_IPolygon r1;
	r1 = (hxd__impl__ArrayIterator_h2d_col_IPolygon)hl_alloc_obj(&t$hxd_impl_ArrayIterator_h2d_col_IPolygon);
	hxd_impl_ArrayIterator_h2d_col_IPolygon_new(r1,r0);
	return r1;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__toPolygons(hl__types__ArrayObj r0,double* r1) {
	hl__types__ArrayObj r3, r7, r10, r12;
	hl_type *r5;
	double r2, r13;
	vdynamic *r11;
	int r6, r8, r9;
	varray *r4;
	if( r1 ) goto label$20e7612_5_3;
	r2 = 1.;
	goto label$20e7612_5_4;
	label$20e7612_5_3:
	r2 = *r1;
	label$20e7612_5_4:
	r5 = &t$hl_types_ArrayObj;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r6 = 0;
	r7 = r0;
	label$20e7612_5_10:
	if( r7 == NULL ) hl_null_access();
	r9 = r7->length;
	if( r6 >= r9 ) goto label$20e7612_5_28;
	r9 = r7->length;
	if( ((unsigned)r6) < ((unsigned)r9) ) goto label$20e7612_5_18;
	r10 = NULL;
	goto label$20e7612_5_21;
	label$20e7612_5_18:
	r4 = r7->array;
	r11 = ((vdynamic**)(r4 + 1))[r6];
	r10 = (hl__types__ArrayObj)hl_dyn_castp(&r11,&t$_dyn,&t$hl_types_ArrayObj);
	label$20e7612_5_21:
	++r6;
	if( r3 == NULL ) hl_null_access();
	r13 = r2;
	r1 = &r13;
	r12 = h2d_col__IPolygon_IPolygon_Impl__toPolygon(r10,r1);
	r8 = hl_types_ArrayObj_push(r3,((vdynamic*)r12));
	goto label$20e7612_5_10;
	label$20e7612_5_28:
	return r3;
}

h2d__col__IBounds h2d_col__IPolygons_IPolygons_Impl__getBounds(hl__types__ArrayObj r0,h2d__col__IBounds r1) {
	hl__types__ArrayObj r5, r7;
	h2d__col__IBounds r3;
	vdynamic *r8;
	varray *r9;
	int r4, r6;
	if( r1 ) goto label$20e7612_6_4;
	r3 = (h2d__col__IBounds)hl_alloc_obj(&t$h2d_col_IBounds);
	h2d_col_IBounds_new(r3);
	r1 = r3;
	label$20e7612_6_4:
	r4 = 0;
	r5 = r0;
	label$20e7612_6_6:
	if( r5 == NULL ) hl_null_access();
	r6 = r5->length;
	if( r4 >= r6 ) goto label$20e7612_6_20;
	r6 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$20e7612_6_14;
	r7 = NULL;
	goto label$20e7612_6_17;
	label$20e7612_6_14:
	r9 = r5->array;
	r8 = ((vdynamic**)(r9 + 1))[r4];
	r7 = (hl__types__ArrayObj)hl_dyn_castp(&r8,&t$_dyn,&t$hl_types_ArrayObj);
	label$20e7612_6_17:
	++r4;
	r3 = h2d_col__IPolygon_IPolygon_Impl__getBounds(r7,r1);
	goto label$20e7612_6_6;
	label$20e7612_6_20:
	return r1;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__union(hl__types__ArrayObj r0,hl__types__ArrayObj r1,bool* r2) {
	hl__types__ArrayObj r8;
	venum *r7, *r9, *r10, *r11, *r12;
	bool r3, r6;
	hxd__clipper__Clipper r4;
	if( r2 ) goto label$20e7612_7_3;
	r3 = true;
	goto label$20e7612_7_4;
	label$20e7612_7_3:
	r3 = *r2;
	label$20e7612_7_4:
	r4 = (hxd__clipper__Clipper)hl_alloc_obj(&t$hxd_clipper_Clipper);
	hxd_clipper_Clipper_new(r4);
	if( r3 ) goto label$20e7612_7_9;
	r7 = (venum*)g$hxd_clipper_ResultKind_NoHoles;
	r4->resultKind = r7;
	label$20e7612_7_9:
	r9 = (venum*)g$hxd_clipper_PolyType_Clip;
	r6 = hxd_clipper__Clipper_ClipperBase_addPolygons(((hxd__clipper___Clipper__ClipperBase)r4),r0,r9);
	if( !r1 ) goto label$20e7612_7_14;
	r9 = (venum*)g$hxd_clipper_PolyType_Clip;
	r6 = hxd_clipper__Clipper_ClipperBase_addPolygons(((hxd__clipper___Clipper__ClipperBase)r4),r1,r9);
	label$20e7612_7_14:
	r10 = (venum*)g$hxd_clipper_ClipType_Union;
	r11 = (venum*)g$hxd_clipper_PolyFillType_NonZero;
	r12 = (venum*)g$hxd_clipper_PolyFillType_NonZero;
	r8 = hxd_clipper_Clipper_execute(r4,r10,r11,r12);
	return r8;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__intersection(hl__types__ArrayObj r0,hl__types__ArrayObj r1,bool* r2) {
	hl__types__ArrayObj r4;
	venum *r5;
	bool r3;
	if( r2 ) goto label$20e7612_8_3;
	r3 = true;
	goto label$20e7612_8_4;
	label$20e7612_8_3:
	r3 = *r2;
	label$20e7612_8_4:
	r5 = (venum*)g$db9b2a3;
	r4 = h2d_col__IPolygons_IPolygons_Impl__clipperOp(r0,r1,r5,r3);
	return r4;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__subtraction(hl__types__ArrayObj r0,hl__types__ArrayObj r1,bool* r2) {
	hl__types__ArrayObj r4;
	venum *r5;
	bool r3;
	if( r2 ) goto label$20e7612_9_3;
	r3 = true;
	goto label$20e7612_9_4;
	label$20e7612_9_3:
	r3 = *r2;
	label$20e7612_9_4:
	r5 = (venum*)g$hxd_clipper_ClipType_Difference;
	r4 = h2d_col__IPolygons_IPolygons_Impl__clipperOp(r0,r1,r5,r3);
	return r4;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__offset(hl__types__ArrayObj r0,double r1,venum* r2,bool* r3) {
	hl__types__ArrayObj r7, r9;
	venum *r15, *r16, *r18;
	hl_type *r11;
	bool r4;
	hxd__clipper__ClipperOffset r12;
	double r17;
	double *r13, *r14;
	varray *r10;
	int r6, r8;
	if( r3 ) goto label$20e7612_10_3;
	r4 = true;
	goto label$20e7612_10_4;
	label$20e7612_10_3:
	r4 = *r3;
	label$20e7612_10_4:
	if( r0 == NULL ) hl_null_access();
	r6 = r0->length;
	r8 = 0;
	if( r6 != r8 ) goto label$20e7612_10_17;
	r7 = NULL;
	if( r7 ) goto label$20e7612_10_15;
	r11 = &t$hl_types_ArrayObj;
	r6 = 0;
	r10 = hl_alloc_array(r11,r6);
	r9 = hl_types_ArrayObj_alloc(r10);
	goto label$20e7612_10_16;
	label$20e7612_10_15:
	r9 = r7;
	label$20e7612_10_16:
	return r9;
	label$20e7612_10_17:
	r12 = (hxd__clipper__ClipperOffset)hl_alloc_obj(&t$hxd_clipper_ClipperOffset);
	r13 = NULL;
	r14 = NULL;
	hxd_clipper_ClipperOffset_new(r12,r13,r14);
	if( r2 == NULL ) hl_null_access();
	r6 = HL__ENUM_INDEX__(r2);
	switch(r6) {
		default:
			goto label$20e7612_10_38;
		case 0:
			r15 = (venum*)g$hxd_clipper_JoinType_Square;
			r16 = (venum*)g$hxd_clipper_EndType_ClosedPol;
			hxd_clipper_ClipperOffset_addPolygons(r12,r0,r15,r16);
			goto label$20e7612_10_38;
		case 1:
			r15 = (venum*)g$hxd_clipper_JoinType_Miter;
			r16 = (venum*)g$hxd_clipper_EndType_ClosedPol;
			hxd_clipper_ClipperOffset_addPolygons(r12,r0,r15,r16);
			goto label$20e7612_10_38;
		case 2:
			r17 = ((h2d_col_OffsetKind_Round*)r2)->p0;
			r12->ArcTolerance = r17;
			r15 = (venum*)g$hxd_clipper_JoinType_Round;
			r16 = (venum*)g$hxd_clipper_EndType_ClosedPol;
			hxd_clipper_ClipperOffset_addPolygons(r12,r0,r15,r16);
	}
	label$20e7612_10_38:
	if( r4 ) goto label$20e7612_10_41;
	r18 = (venum*)g$hxd_clipper_ResultKind_NoHoles;
	r12->resultKind = r18;
	label$20e7612_10_41:
	r7 = hxd_clipper_ClipperOffset_execute(r12,r1);
	return r7;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__clipperOp(hl__types__ArrayObj r0,hl__types__ArrayObj r1,venum* r2,bool r3) {
	hl__types__ArrayObj r8;
	venum *r7, *r9, *r10, *r11;
	bool r6;
	hxd__clipper__Clipper r4;
	r4 = (hxd__clipper__Clipper)hl_alloc_obj(&t$hxd_clipper_Clipper);
	hxd_clipper_Clipper_new(r4);
	if( r3 ) goto label$20e7612_11_5;
	r7 = (venum*)g$hxd_clipper_ResultKind_NoHoles;
	r4->resultKind = r7;
	label$20e7612_11_5:
	r9 = (venum*)g$hxd_clipper_PolyType_Subject;
	r6 = hxd_clipper__Clipper_ClipperBase_addPolygons(((hxd__clipper___Clipper__ClipperBase)r4),r0,r9);
	r9 = (venum*)g$hxd_clipper_PolyType_Clip;
	r6 = hxd_clipper__Clipper_ClipperBase_addPolygons(((hxd__clipper___Clipper__ClipperBase)r4),r1,r9);
	r10 = (venum*)g$hxd_clipper_PolyFillType_NonZero;
	r11 = (venum*)g$hxd_clipper_PolyFillType_NonZero;
	r8 = hxd_clipper_Clipper_execute(r4,r2,r10,r11);
	return r8;
}

bool h2d_col__IPolygons_IPolygons_Impl__contains(hl__types__ArrayObj r0,h2d__col__Point r1,bool* r2) {
	hl__types__ArrayObj r5, r7;
	bool r3, r10, r11;
	vdynamic *r8;
	varray *r9;
	int r4, r6;
	if( r2 ) goto label$20e7612_12_3;
	r3 = false;
	goto label$20e7612_12_4;
	label$20e7612_12_3:
	r3 = *r2;
	label$20e7612_12_4:
	r4 = 0;
	r5 = r0;
	label$20e7612_12_6:
	if( r5 == NULL ) hl_null_access();
	r6 = r5->length;
	if( r4 >= r6 ) goto label$20e7612_12_25;
	r6 = r5->length;
	if( ((unsigned)r4) < ((unsigned)r6) ) goto label$20e7612_12_14;
	r7 = NULL;
	goto label$20e7612_12_17;
	label$20e7612_12_14:
	r9 = r5->array;
	r8 = ((vdynamic**)(r9 + 1))[r4];
	r7 = (hl__types__ArrayObj)hl_dyn_castp(&r8,&t$_dyn,&t$hl_types_ArrayObj);
	label$20e7612_12_17:
	++r4;
	r10 = r3;
	r2 = &r10;
	r10 = h2d_col__IPolygon_IPolygon_Impl__contains(r7,r1,r2);
	if( !r10 ) goto label$20e7612_12_24;
	r11 = true;
	return r11;
	label$20e7612_12_24:
	goto label$20e7612_12_6;
	label$20e7612_12_25:
	r11 = false;
	return r11;
}

hl__types__ArrayObj h2d_col__IPolygons_IPolygons_Impl__optimize(hl__types__ArrayObj r0,double r1) {
	hl__types__ArrayObj r2, r6, r9, r11;
	hl_type *r4;
	vdynamic *r10;
	int r5, r7, r8;
	varray *r3;
	r4 = &t$hl_types_ArrayObj;
	r5 = 0;
	r3 = hl_alloc_array(r4,r5);
	r2 = hl_types_ArrayObj_alloc(r3);
	r5 = 0;
	r6 = r0;
	label$20e7612_13_6:
	if( r6 == NULL ) hl_null_access();
	r8 = r6->length;
	if( r5 >= r8 ) goto label$20e7612_13_22;
	r8 = r6->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$20e7612_13_14;
	r9 = NULL;
	goto label$20e7612_13_17;
	label$20e7612_13_14:
	r3 = r6->array;
	r10 = ((vdynamic**)(r3 + 1))[r5];
	r9 = (hl__types__ArrayObj)hl_dyn_castp(&r10,&t$_dyn,&t$hl_types_ArrayObj);
	label$20e7612_13_17:
	++r5;
	if( r2 == NULL ) hl_null_access();
	r11 = h2d_col__IPolygon_IPolygon_Impl__optimize(r9,r1);
	r7 = hl_types_ArrayObj_push(r2,((vdynamic*)r11));
	goto label$20e7612_13_6;
	label$20e7612_13_22:
	return r2;
}

