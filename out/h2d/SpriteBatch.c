// Generated by HLC 4.2.4 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <h2d/SpriteBatch.h>
void h2d_SpriteBatch_flush(h2d__SpriteBatch);
extern hl_type t$h2d_BatchElement;
void h2d_BatchElement_new(h2d__BatchElement,h2d__Tile);
#include <h2d/RenderContext.h>
void h2d_Object_sync(h2d__Object,h2d__RenderContext);
void h2d_BatchElement_remove(h2d__BatchElement);
#include <h2d/col/Bounds.h>
void h2d_Object_getBoundsRec(h2d__Object,h2d__Object,h2d__col__Bounds,bool);
#include <hl/natives.h>
void h2d_Object_addBounds(h2d__Object,h2d__Object,h2d__col__Bounds,double,double,double,double);
#include <h3d/mat/Texture.h>
#include <h2d/impl/_BatchDrawState/StateEntry.h>
#include <h3d/impl/ManagedBuffer.h>
#include <h3d/BufferFlag.h>
extern hl_type t$hl_types_ArrayBytes_hl_F32;
void hl_types_ArrayBytes_hl_F32_new(hl__types__ArrayBytes_hl_F32);
void hl_types_ArrayBytes_hl_F32___expand(hl__types__ArrayBytes_hl_F32,int);
void h2d_impl_BatchDrawState_clear(h2d__impl__BatchDrawState);
void h2d_impl_BatchDrawState_setTexture(h2d__impl__BatchDrawState,h3d__mat__Texture);
void h3d_Buffer_uploadVector(h3d__Buffer,hl__types__ArrayBytes_hl_F32,int,int,int*);
void h3d_Buffer_dispose(h3d__Buffer);
extern hl_type t$h3d_BufferFlag;
extern venum* g$h3d_BufferFlag_Dynamic;
extern venum* g$h3d_BufferFlag_Quads;
extern venum* g$h3d_BufferFlag_RawFormat;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
h3d__Buffer h3d_Buffer_ofSubFloats(hl__types__ArrayBytes_hl_F32,int,int,hl__types__ArrayObj);
void h2d_SpriteBatch_drawWith(h2d__SpriteBatch,h2d__RenderContext,h2d__Drawable);
#include <h3d/Engine.h>
bool h2d_RenderContext_beginDrawBatchState(h2d__RenderContext,h2d__Drawable);
void h2d_impl_BatchDrawState_drawQuads(h2d__impl__BatchDrawState,h2d__RenderContext,h3d__Buffer,int*,int*);
#include <h2d/_SpriteBatch/ElementsIterator.h>
extern hl_type t$h2d__SpriteBatch_ElementsIterator;
void h2d__SpriteBatch_ElementsIterator_new(h2d___SpriteBatch__ElementsIterator,h2d__BatchElement);
void h2d_Object_onRemove(h2d__Object);
void h2d_Drawable_new(h2d__Drawable,h2d__Object);
extern hl_type t$h2d_impl_BatchDrawState;
void h2d_impl_BatchDrawState_new(h2d__impl__BatchDrawState);

h2d__BatchElement h2d_SpriteBatch_add(h2d__SpriteBatch r0,h2d__BatchElement r1,bool* r2) {
	h2d__BatchElement r4, r5, r6;
	bool r3;
	if( r2 ) goto label$e97e838_1_3;
	r3 = false;
	goto label$e97e838_1_4;
	label$e97e838_1_3:
	r3 = *r2;
	label$e97e838_1_4:
	if( r1 == NULL ) hl_null_access();
	r1->batch = r0;
	r4 = r0->first;
	if( r4 ) goto label$e97e838_1_14;
	r0->last = r1;
	r0->first = r1;
	r6 = NULL;
	r1->next = r6;
	r1->prev = r6;
	goto label$e97e838_1_32;
	label$e97e838_1_14:
	if( !r3 ) goto label$e97e838_1_24;
	r5 = NULL;
	r1->prev = r5;
	r5 = r0->first;
	r1->next = r5;
	r4 = r0->first;
	if( r4 == NULL ) hl_null_access();
	r4->prev = r1;
	r0->first = r1;
	goto label$e97e838_1_32;
	label$e97e838_1_24:
	r4 = r0->last;
	if( r4 == NULL ) hl_null_access();
	r4->next = r1;
	r5 = r0->last;
	r1->prev = r5;
	r5 = NULL;
	r1->next = r5;
	r0->last = r1;
	label$e97e838_1_32:
	return r1;
}

void h2d_SpriteBatch_clear(h2d__SpriteBatch r0) {
	h2d__BatchElement r1;
	r1 = NULL;
	r0->last = r1;
	r0->first = r1;
	h2d_SpriteBatch_flush(r0);
	return;
}

h2d__BatchElement h2d_SpriteBatch_alloc(h2d__SpriteBatch r0,h2d__Tile r1) {
	bool *r4;
	h2d__BatchElement r2;
	r2 = (h2d__BatchElement)hl_alloc_obj(&t$h2d_BatchElement);
	h2d_BatchElement_new(r2,r1);
	r4 = NULL;
	r2 = h2d_SpriteBatch_add(r0,r2,r4);
	return r2;
}

void h2d_SpriteBatch_delete(h2d__SpriteBatch r0,h2d__BatchElement r1) {
	h2d__BatchElement r3, r4;
	h2d__SpriteBatch r5;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->prev;
	if( r3 ) goto label$e97e838_4_8;
	r3 = r0->first;
	if( r3 != r1 ) goto label$e97e838_4_7;
	r3 = r1->next;
	r0->first = r3;
	label$e97e838_4_7:
	goto label$e97e838_4_12;
	label$e97e838_4_8:
	r3 = r1->prev;
	if( r3 == NULL ) hl_null_access();
	r4 = r1->next;
	r3->next = r4;
	label$e97e838_4_12:
	r3 = r1->next;
	if( r3 ) goto label$e97e838_4_19;
	r3 = r0->last;
	if( r3 != r1 ) goto label$e97e838_4_18;
	r3 = r1->prev;
	r0->last = r3;
	label$e97e838_4_18:
	goto label$e97e838_4_23;
	label$e97e838_4_19:
	r3 = r1->next;
	if( r3 == NULL ) hl_null_access();
	r4 = r1->prev;
	r3->prev = r4;
	label$e97e838_4_23:
	r5 = NULL;
	r1->batch = r5;
	return;
}

void h2d_SpriteBatch_sync(h2d__SpriteBatch r0,h2d__RenderContext r1) {
	h2d__BatchElement r4, r5;
	bool r3;
	double r6;
	h2d_Object_sync(((h2d__Object)r0),r1);
	r3 = r0->hasUpdate;
	if( !r3 ) goto label$e97e838_5_15;
	r4 = r0->first;
	label$e97e838_5_4:
	if( !r4 ) goto label$e97e838_5_15;
	if( r4 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r6 = r1->elapsedTime;
	r3 = ((bool (*)(h2d__BatchElement,double))r4->$type->vobj_proto[0])(r4,r6);
	if( r3 ) goto label$e97e838_5_12;
	h2d_BatchElement_remove(r4);
	label$e97e838_5_12:
	r5 = r4->next;
	r4 = r5;
	goto label$e97e838_5_4;
	label$e97e838_5_15:
	h2d_SpriteBatch_flush(r0);
	return;
}

void h2d_SpriteBatch_getBoundsRec(h2d__SpriteBatch r0,h2d__Object r1,h2d__col__Bounds r2,bool r3) {
	h2d__BatchElement r6, r7;
	bool r5;
	h2d__Tile r8;
	double r9, r10, r11, r12, r13, r14, r15, r16, r17, r18, r19, r20, r21, r22, r23, r24, r25, r26;
	h2d_Object_getBoundsRec(((h2d__Object)r0),r1,r2,r3);
	r6 = r0->first;
	label$e97e838_6_2:
	if( !r6 ) goto label$e97e838_6_115;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->_t;
	r5 = r0->hasRotationScale;
	if( !r5 ) goto label$e97e838_6_102;
	r9 = r6->rotation;
	r9 = hl_math_cos(r9);
	r10 = r6->rotation;
	r10 = hl_math_sin(r10);
	if( r8 == NULL ) hl_null_access();
	r11 = r8->width;
	r12 = r8->height;
	r13 = r8->dx;
	r14 = r6->scaleX;
	r13 = r13 * r14;
	r14 = r8->dy;
	r15 = r6->scaleY;
	r14 = r14 * r15;
	r15 = r13 * r9;
	r16 = r14 * r10;
	r15 = r15 - r16;
	r16 = r6->x;
	r15 = r15 + r16;
	r16 = r14 * r9;
	r17 = r13 * r10;
	r16 = r16 + r17;
	r17 = r6->y;
	r16 = r16 + r17;
	r19 = 1.000000000000000036e-10;
	r20 = 1.000000000000000036e-10;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r15,r16,r19,r20);
	r17 = r8->dx;
	r17 = r17 + r11;
	r18 = r6->scaleX;
	r17 = r17 * r18;
	r18 = r8->dy;
	r19 = r6->scaleY;
	r18 = r18 * r19;
	r19 = r17 * r9;
	r20 = r18 * r10;
	r19 = r19 - r20;
	r20 = r6->x;
	r19 = r19 + r20;
	r15 = r19;
	r19 = r18 * r9;
	r20 = r17 * r10;
	r19 = r19 + r20;
	r20 = r6->y;
	r19 = r19 + r20;
	r16 = r19;
	r21 = 1.000000000000000036e-10;
	r22 = 1.000000000000000036e-10;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r15,r16,r21,r22);
	r19 = r8->dx;
	r20 = r6->scaleX;
	r19 = r19 * r20;
	r20 = r8->dy;
	r20 = r20 + r12;
	r21 = r6->scaleY;
	r20 = r20 * r21;
	r21 = r19 * r9;
	r22 = r20 * r10;
	r21 = r21 - r22;
	r22 = r6->x;
	r21 = r21 + r22;
	r15 = r21;
	r21 = r20 * r9;
	r22 = r19 * r10;
	r21 = r21 + r22;
	r22 = r6->y;
	r21 = r21 + r22;
	r16 = r21;
	r23 = 1.000000000000000036e-10;
	r24 = 1.000000000000000036e-10;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r15,r16,r23,r24);
	r21 = r8->dx;
	r21 = r21 + r11;
	r22 = r6->scaleX;
	r21 = r21 * r22;
	r22 = r8->dy;
	r22 = r22 + r12;
	r23 = r6->scaleY;
	r22 = r22 * r23;
	r23 = r21 * r9;
	r24 = r22 * r10;
	r23 = r23 - r24;
	r24 = r6->x;
	r23 = r23 + r24;
	r15 = r23;
	r23 = r22 * r9;
	r24 = r21 * r10;
	r23 = r23 + r24;
	r24 = r6->y;
	r23 = r23 + r24;
	r16 = r23;
	r25 = 1.000000000000000036e-10;
	r26 = 1.000000000000000036e-10;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r15,r16,r25,r26);
	goto label$e97e838_6_112;
	label$e97e838_6_102:
	r9 = r6->x;
	if( r8 == NULL ) hl_null_access();
	r10 = r8->dx;
	r9 = r9 + r10;
	r10 = r6->y;
	r11 = r8->dy;
	r10 = r10 + r11;
	r11 = r8->width;
	r12 = r8->height;
	h2d_Object_addBounds(((h2d__Object)r0),r1,r2,r9,r10,r11,r12);
	label$e97e838_6_112:
	r7 = r6->next;
	r6 = r7;
	goto label$e97e838_6_2;
	label$e97e838_6_115:
	return;
}

void h2d_SpriteBatch_flush(h2d__SpriteBatch r0) {
	hl__types__ArrayObj r37;
	vvirtual *r35;
	venum *r40;
	hl_type *r39;
	h2d__impl__BatchDrawState r11;
	bool r13, r33;
	hl__types__ArrayBytes_hl_F32 r3, r7;
	h2d__BatchElement r2, r12;
	h2d__Tile r14;
	float r9;
	h3d__Buffer r32;
	double r8, r19, r20, r21, r22, r23, r24, r25, r26, r27, r28, r29, r30, r31;
	int *r36;
	h2d__impl___BatchDrawState__StateEntry r16;
	varray *r38;
	h3d__impl__ManagedBuffer r34;
	h3d__mat__Texture r15;
	vbyte *r10;
	int r4, r5, r6, r17, r18;
	r2 = r0->first;
	if( r2 ) goto label$e97e838_7_3;
	return;
	label$e97e838_7_3:
	r3 = r0->tmpBuf;
	if( r3 ) goto label$e97e838_7_24;
	r4 = 0;
	r3 = (hl__types__ArrayBytes_hl_F32)hl_alloc_obj(&t$hl_types_ArrayBytes_hl_F32);
	hl_types_ArrayBytes_hl_F32_new(r3);
	r6 = 0;
	if( r6 >= r4 ) goto label$e97e838_7_23;
	r6 = r3->length;
	if( r6 >= r4 ) goto label$e97e838_7_23;
	r6 = 1;
	r5 = r4 - r6;
	r8 = 0.;
	r9 = (float)r8;
	r6 = r3->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$e97e838_7_19;
	hl_types_ArrayBytes_hl_F32___expand(r3,r5);
	label$e97e838_7_19:
	r10 = r3->bytes;
	r6 = 2;
	r6 = r5 << r6;
	*(float*)(r10 + r6) = r9;
	label$e97e838_7_23:
	r0->tmpBuf = r3;
	label$e97e838_7_24:
	r4 = 0;
	r2 = r0->first;
	r3 = r0->tmpBuf;
	r5 = 0;
	r11 = r0->state;
	if( r11 == NULL ) hl_null_access();
	h2d_impl_BatchDrawState_clear(r11);
	label$e97e838_7_31:
	if( !r2 ) goto label$e97e838_7_866;
	if( r2 == NULL ) hl_null_access();
	r13 = r2->visible;
	if( r13 ) goto label$e97e838_7_39;
	r12 = r2->next;
	r2 = r12;
	goto label$e97e838_7_31;
	label$e97e838_7_39:
	r14 = r2->_t;
	if( !r14 ) goto label$e97e838_7_46;
	r11 = r0->state;
	if( r11 == NULL ) hl_null_access();
	if( r14 == NULL ) hl_null_access();
	r15 = r14->innerTex;
	h2d_impl_BatchDrawState_setTexture(r11,r15);
	label$e97e838_7_46:
	r11 = r0->state;
	if( r11 == NULL ) hl_null_access();
	r16 = r11->tail;
	if( r16 == NULL ) hl_null_access();
	r6 = r16->count;
	r17 = 4;
	r6 = r6 + r17;
	r16->count = r6;
	r6 = r11->totalCount;
	r17 = 4;
	r6 = r6 + r17;
	r11->totalCount = r6;
	r17 = 32;
	r6 = r4 + r17;
	if( r3 == NULL ) hl_null_access();
	r18 = r3->length;
	if( r18 >= r6 ) goto label$e97e838_7_74;
	r18 = 1;
	r17 = r6 - r18;
	r8 = 0.;
	r9 = (float)r8;
	r18 = r3->length;
	if( ((unsigned)r17) < ((unsigned)r18) ) goto label$e97e838_7_70;
	hl_types_ArrayBytes_hl_F32___expand(r3,r17);
	label$e97e838_7_70:
	r10 = r3->bytes;
	r18 = 2;
	r18 = r17 << r18;
	*(float*)(r10 + r18) = r9;
	label$e97e838_7_74:
	r13 = r0->hasRotationScale;
	if( !r13 ) goto label$e97e838_7_496;
	r8 = r2->rotation;
	r8 = hl_math_cos(r8);
	r19 = r2->rotation;
	r19 = hl_math_sin(r19);
	if( r14 == NULL ) hl_null_access();
	r20 = r14->width;
	r21 = r14->height;
	r22 = r14->dx;
	r23 = r2->scaleX;
	r22 = r22 * r23;
	r23 = r14->dy;
	r24 = r2->scaleY;
	r23 = r23 * r24;
	r6 = r4;
	++r4;
	r24 = r22 * r8;
	r25 = r23 * r19;
	r24 = r24 - r25;
	r25 = r2->x;
	r24 = r24 + r25;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_100;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_100:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r23 * r8;
	r25 = r22 * r19;
	r24 = r24 + r25;
	r25 = r2->y;
	r24 = r24 + r25;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_115;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_115:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r14->u;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_126;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_126:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r14->v;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_137;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_137:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r2->r;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_148;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_148:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r2->g;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_159;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_159:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r2->b;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_170;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_170:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r24 = r2->a;
	r9 = (float)r24;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_181;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_181:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r24 = r14->dx;
	r24 = r24 + r20;
	r25 = r2->scaleX;
	r24 = r24 * r25;
	r25 = r14->dy;
	r26 = r2->scaleY;
	r25 = r25 * r26;
	r6 = r4;
	++r4;
	r26 = r24 * r8;
	r27 = r25 * r19;
	r26 = r26 - r27;
	r27 = r2->x;
	r26 = r26 + r27;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_203;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_203:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r25 * r8;
	r27 = r24 * r19;
	r26 = r26 + r27;
	r27 = r2->y;
	r26 = r26 + r27;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_218;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_218:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r14->u2;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_229;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_229:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r14->v;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_240;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_240:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r2->r;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_251;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_251:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r2->g;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_262;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_262:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r2->b;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_273;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_273:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r26 = r2->a;
	r9 = (float)r26;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_284;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_284:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r26 = r14->dx;
	r27 = r2->scaleX;
	r26 = r26 * r27;
	r27 = r14->dy;
	r27 = r27 + r21;
	r28 = r2->scaleY;
	r27 = r27 * r28;
	r6 = r4;
	++r4;
	r28 = r26 * r8;
	r29 = r27 * r19;
	r28 = r28 - r29;
	r29 = r2->x;
	r28 = r28 + r29;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_306;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_306:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r27 * r8;
	r29 = r26 * r19;
	r28 = r28 + r29;
	r29 = r2->y;
	r28 = r28 + r29;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_321;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_321:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r14->u;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_332;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_332:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r14->v2;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_343;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_343:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r2->r;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_354;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_354:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r2->g;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_365;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_365:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r2->b;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_376;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_376:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r28 = r2->a;
	r9 = (float)r28;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_387;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_387:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r28 = r14->dx;
	r28 = r28 + r20;
	r29 = r2->scaleX;
	r28 = r28 * r29;
	r29 = r14->dy;
	r29 = r29 + r21;
	r30 = r2->scaleY;
	r29 = r29 * r30;
	r6 = r4;
	++r4;
	r30 = r28 * r8;
	r31 = r29 * r19;
	r30 = r30 - r31;
	r31 = r2->x;
	r30 = r30 + r31;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_410;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_410:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r29 * r8;
	r31 = r28 * r19;
	r30 = r30 + r31;
	r31 = r2->y;
	r30 = r30 + r31;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_425;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_425:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r14->u2;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_436;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_436:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r14->v2;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_447;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_447:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r2->r;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_458;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_458:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r2->g;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_469;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_469:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r2->b;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_480;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_480:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r30 = r2->a;
	r9 = (float)r30;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_491;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_491:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	goto label$e97e838_7_863;
	label$e97e838_7_496:
	r8 = r2->x;
	if( r14 == NULL ) hl_null_access();
	r19 = r14->dx;
	r8 = r8 + r19;
	r19 = r2->y;
	r20 = r14->dy;
	r19 = r19 + r20;
	r6 = r4;
	++r4;
	r9 = (float)r8;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_509;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_509:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r9 = (float)r19;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_519;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_519:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->u;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_530;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_530:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->v;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_541;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_541:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->r;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_552;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_552:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->g;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_563;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_563:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->b;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_574;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_574:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->a;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_585;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_585:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r21 = r14->width;
	r20 = r8 + r21;
	r21 = 0.1000000000000000056;
	r20 = r20 + r21;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_599;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_599:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r9 = (float)r19;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_609;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_609:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->u2;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_620;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_620:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->v;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_631;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_631:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->r;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_642;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_642:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->g;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_653;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_653:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->b;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_664;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_664:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->a;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_675;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_675:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r9 = (float)r8;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_685;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_685:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r21 = r14->height;
	r20 = r19 + r21;
	r21 = 0.1000000000000000056;
	r20 = r20 + r21;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_699;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_699:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->u;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_710;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_710:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->v2;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_721;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_721:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->r;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_732;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_732:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->g;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_743;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_743:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->b;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_754;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_754:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->a;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_765;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_765:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r21 = r14->width;
	r20 = r8 + r21;
	r21 = 0.1000000000000000056;
	r20 = r20 + r21;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_779;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_779:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r21 = r14->height;
	r20 = r19 + r21;
	r21 = 0.1000000000000000056;
	r20 = r20 + r21;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_793;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_793:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->u2;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_804;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_804:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r14->v2;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_815;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_815:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->r;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_826;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_826:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->g;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_837;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_837:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->b;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_848;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_848:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	r6 = r4;
	++r4;
	r20 = r2->a;
	r9 = (float)r20;
	r17 = r3->length;
	if( ((unsigned)r6) < ((unsigned)r17) ) goto label$e97e838_7_859;
	hl_types_ArrayBytes_hl_F32___expand(r3,r6);
	label$e97e838_7_859:
	r10 = r3->bytes;
	r17 = 2;
	r17 = r6 << r17;
	*(float*)(r10 + r17) = r9;
	label$e97e838_7_863:
	r12 = r2->next;
	r2 = r12;
	goto label$e97e838_7_31;
	label$e97e838_7_866:
	r17 = 3;
	r6 = r4 >> r17;
	r5 = r6;
	r32 = r0->buffer;
	if( !r32 ) goto label$e97e838_7_884;
	r32 = r0->buffer;
	if( r32 == NULL ) hl_null_access();
	r34 = r32->buffer;
	if( !r34 ) goto label$e97e838_7_881;
	r34 = r32->buffer;
	if( r34 == NULL ) hl_null_access();
	r35 = r34->vbuf;
	if( !r35 ) goto label$e97e838_7_881;
	r33 = false;
	goto label$e97e838_7_882;
	label$e97e838_7_881:
	r33 = true;
	label$e97e838_7_882:
	r33 = !r33;
	goto label$e97e838_7_885;
	label$e97e838_7_884:
	r33 = false;
	label$e97e838_7_885:
	if( !r33 ) goto label$e97e838_7_902;
	r32 = r0->buffer;
	if( r32 == NULL ) hl_null_access();
	r6 = r32->vertices;
	if( r6 < r5 ) goto label$e97e838_7_897;
	r32 = r0->buffer;
	if( r32 == NULL ) hl_null_access();
	r7 = r0->tmpBuf;
	r6 = 0;
	r36 = NULL;
	h3d_Buffer_uploadVector(r32,r7,r6,r5,r36);
	return;
	label$e97e838_7_897:
	r32 = r0->buffer;
	if( r32 == NULL ) hl_null_access();
	h3d_Buffer_dispose(r32);
	r32 = NULL;
	r0->buffer = r32;
	label$e97e838_7_902:
	r17 = 0;
	if( r5 == r17 ) goto label$e97e838_7_906;
	r33 = false;
	goto label$e97e838_7_907;
	label$e97e838_7_906:
	r33 = true;
	label$e97e838_7_907:
	r0->empty = r33;
	r17 = 0;
	if( r17 >= r5 ) goto label$e97e838_7_927;
	r7 = r0->tmpBuf;
	r6 = 8;
	r39 = &t$h3d_BufferFlag;
	r18 = 3;
	r38 = hl_alloc_array(r39,r18);
	r40 = (venum*)g$h3d_BufferFlag_Dynamic;
	r18 = 0;
	((venum**)(r38 + 1))[r18] = r40;
	r40 = (venum*)g$h3d_BufferFlag_Quads;
	r18 = 1;
	((venum**)(r38 + 1))[r18] = r40;
	r40 = (venum*)g$h3d_BufferFlag_RawFormat;
	r18 = 2;
	((venum**)(r38 + 1))[r18] = r40;
	r37 = hl_types_ArrayObj_alloc(r38);
	r32 = h3d_Buffer_ofSubFloats(r7,r6,r5,r37);
	r0->buffer = r32;
	label$e97e838_7_927:
	return;
}

void h2d_SpriteBatch_draw(h2d__SpriteBatch r0,h2d__RenderContext r1) {
	h2d_SpriteBatch_drawWith(r0,r1,((h2d__Drawable)r0));
	return;
}

void h2d_SpriteBatch_drawWith(h2d__SpriteBatch r0,h2d__RenderContext r1,h2d__Drawable r2) {
	vvirtual *r8;
	h2d__impl__BatchDrawState r10;
	bool r6;
	h2d__BatchElement r4;
	h3d__Engine r9;
	h3d__Buffer r5;
	int *r11, *r12;
	h3d__impl__ManagedBuffer r7;
	r4 = r0->first;
	if( !r4 ) goto label$e97e838_9_16;
	r5 = r0->buffer;
	if( !r5 ) goto label$e97e838_9_16;
	r5 = r0->buffer;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->buffer;
	if( !r7 ) goto label$e97e838_9_14;
	r7 = r5->buffer;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->vbuf;
	if( !r8 ) goto label$e97e838_9_14;
	r6 = false;
	goto label$e97e838_9_15;
	label$e97e838_9_14:
	r6 = true;
	label$e97e838_9_15:
	goto label$e97e838_9_17;
	label$e97e838_9_16:
	r6 = true;
	label$e97e838_9_17:
	if( r6 ) goto label$e97e838_9_20;
	r6 = r0->empty;
	if( !r6 ) goto label$e97e838_9_21;
	label$e97e838_9_20:
	return;
	label$e97e838_9_21:
	if( r1 == NULL ) hl_null_access();
	r6 = h2d_RenderContext_beginDrawBatchState(r1,r2);
	if( r6 ) goto label$e97e838_9_25;
	return;
	label$e97e838_9_25:
	r9 = r1->engine;
	r10 = r0->state;
	if( r10 == NULL ) hl_null_access();
	r5 = r0->buffer;
	r11 = NULL;
	r12 = NULL;
	h2d_impl_BatchDrawState_drawQuads(r10,r1,r5,r11,r12);
	return;
}

bool h2d_SpriteBatch_isEmpty(h2d__SpriteBatch r0) {
	h2d__BatchElement r2, r3;
	bool r1;
	r2 = r0->first;
	r3 = NULL;
	if( r2 == r3 ) goto label$e97e838_10_5;
	r1 = false;
	goto label$e97e838_10_6;
	label$e97e838_10_5:
	r1 = true;
	label$e97e838_10_6:
	return r1;
}

h2d___SpriteBatch__ElementsIterator h2d_SpriteBatch_getElements(h2d__SpriteBatch r0) {
	h2d__BatchElement r2;
	h2d___SpriteBatch__ElementsIterator r1;
	r1 = (h2d___SpriteBatch__ElementsIterator)hl_alloc_obj(&t$h2d__SpriteBatch_ElementsIterator);
	r2 = r0->first;
	h2d__SpriteBatch_ElementsIterator_new(r1,r2);
	return r1;
}

void h2d_SpriteBatch_onRemove(h2d__SpriteBatch r0) {
	h2d__impl__BatchDrawState r3;
	h3d__Buffer r2;
	h2d_Object_onRemove(((h2d__Object)r0));
	r2 = r0->buffer;
	if( !r2 ) goto label$e97e838_12_8;
	r2 = r0->buffer;
	if( r2 == NULL ) hl_null_access();
	h3d_Buffer_dispose(r2);
	r2 = NULL;
	r0->buffer = r2;
	label$e97e838_12_8:
	r3 = r0->state;
	if( r3 == NULL ) hl_null_access();
	h2d_impl_BatchDrawState_clear(r3);
	return;
}

void h2d_SpriteBatch_new(h2d__SpriteBatch r0,h2d__Tile r1,h2d__Object r2) {
	h2d__impl__BatchDrawState r5;
	bool r3;
	r3 = false;
	r0->hasUpdate = r3;
	r3 = false;
	r0->hasRotationScale = r3;
	h2d_Drawable_new(((h2d__Drawable)r0),r2);
	r0->tile = r1;
	r5 = (h2d__impl__BatchDrawState)hl_alloc_obj(&t$h2d_impl_BatchDrawState);
	h2d_impl_BatchDrawState_new(r5);
	r0->state = r5;
	return;
}

